"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[956],{93403:(e,t,r)=>{r.r(t),r.d(t,{Account:()=>ei,AddressLookupTableAccount:()=>tr,AddressLookupTableInstruction:()=>rD,AddressLookupTableProgram:()=>rH,Authorized:()=>r3,BLOCKHASH_CACHE_TIMEOUT_MS:()=>tu,BPF_LOADER_DEPRECATED_PROGRAM_ID:()=>ea,BPF_LOADER_PROGRAM_ID:()=>e4,BpfLoader:()=>e6,COMPUTE_BUDGET_INSTRUCTION_LAYOUTS:()=>rJ,ComputeBudgetInstruction:()=>rF,ComputeBudgetProgram:()=>rG,Connection:()=>rM,Ed25519Program:()=>rZ,Enum:()=>$,EpochSchedule:()=>e9,FeeCalculatorLayout:()=>eG,Keypair:()=>rU,LAMPORTS_PER_SOL:()=>nk,LOOKUP_TABLE_INSTRUCTION_LAYOUTS:()=>rV,Loader:()=>e8,Lockup:()=>r8,MAX_SEED_LENGTH:()=>ee,Message:()=>eA,MessageAccountKeys:()=>ed,MessageV0:()=>ex,NONCE_ACCOUNT_LENGTH:()=>eZ,NonceAccount:()=>e$,PACKET_DATA_SIZE:()=>es,PUBLIC_KEY_LENGTH:()=>et,PublicKey:()=>en,SIGNATURE_LENGTH_IN_BYTES:()=>eu,SOLANA_SCHEMA:()=>Q,STAKE_CONFIG_ID:()=>r2,STAKE_INSTRUCTION_LAYOUTS:()=>r6,SYSTEM_INSTRUCTION_LAYOUTS:()=>e1,SYSVAR_CLOCK_PUBKEY:()=>eO,SYSVAR_EPOCH_SCHEDULE_PUBKEY:()=>eR,SYSVAR_INSTRUCTIONS_PUBKEY:()=>eC,SYSVAR_RECENT_BLOCKHASHES_PUBKEY:()=>eN,SYSVAR_RENT_PUBKEY:()=>eL,SYSVAR_REWARDS_PUBKEY:()=>eK,SYSVAR_SLOT_HASHES_PUBKEY:()=>ez,SYSVAR_SLOT_HISTORY_PUBKEY:()=>eq,SYSVAR_STAKE_HISTORY_PUBKEY:()=>eY,Secp256k1Program:()=>r1,SendTransactionError:()=>ej,SolanaJSONRPCError:()=>eU,SolanaJSONRPCErrorCode:()=>eM,StakeAuthorizationLayout:()=>r5,StakeInstruction:()=>r4,StakeProgram:()=>r7,Struct:()=>Z,SystemInstruction:()=>e0,SystemProgram:()=>e2,Transaction:()=>eB,TransactionExpiredBlockheightExceededError:()=>ec,TransactionExpiredNonceInvalidError:()=>eh,TransactionExpiredTimeoutError:()=>el,TransactionInstruction:()=>eE,TransactionMessage:()=>eT,TransactionStatus:()=>e_,VALIDATOR_INFO_KEY:()=>ni,VERSION_PREFIX_MASK:()=>eo,VOTE_PROGRAM_ID:()=>no,ValidatorInfo:()=>ns,VersionedMessage:()=>eI,VersionedTransaction:()=>eW,VoteAccount:()=>nc,VoteAuthorizationLayout:()=>nr,VoteInit:()=>r9,VoteInstruction:()=>ne,VoteProgram:()=>nn,clusterApiUrl:()=>np,sendAndConfirmRawTransaction:()=>nf,sendAndConfirmTransaction:()=>eV});var n,i,a=r(41629),s=r(20328),o=r(5601),u=r(33051),c=r(57273),l=r(55519),h=r(76985),d=r(88903),p=r(38734),f=r(77188),y=r(43463),k=r(34393),g=r(82837),b=r.n(g),m=r(98577),v=r(84800),w=r(78366),S=r.n(w),A=r(80138),x=r.n(A),I=r(23279),_=r(28739),P=r(41215),E=r(20658),B=r(33049),T=r(4482),W=r.n(T),O=r(61325),R=r(70451),C=r(26290),N=["commitment"],L=["encoding"],K=["commitment"],z=["commitment"];function q(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?q(Object(r),!0).forEach(function(t){(0,o.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):q(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function j(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return M(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return M(e,void 0)}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,o=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){o=!0,a=e},f:function(){try{s||null==r.return||r.return()}finally{if(o)throw a}}}}function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function U(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=(0,f.A)(e);return r=t?Reflect.construct(n,arguments,(0,f.A)(this).constructor):n.apply(this,arguments),(0,p.A)(this,r)}}var V=v.ev.utils.randomPrivateKey,D=function(){var e=v.ev.utils.randomPrivateKey(),t=H(e),r=new Uint8Array(64);return r.set(e),r.set(t,32),{publicKey:t,secretKey:r}},H=v.ev.getPublicKey;function F(e){try{return v.ev.ExtendedPoint.fromHex(e),!0}catch(e){return!1}}var J=function(e,t){return v.ev.sign(e,t.slice(0,32))},G=v.ev.verify,X=function(e){return m.Buffer.isBuffer(e)?e:e instanceof Uint8Array?m.Buffer.from(e.buffer,e.byteOffset,e.byteLength):m.Buffer.from(e)},Z=function(){function e(t){(0,y.A)(this,e),Object.assign(this,t)}return(0,k.A)(e,[{key:"encode",value:function(){return m.Buffer.from((0,_.serialize)(Q,this))}}],[{key:"decode",value:function(e){return(0,_.deserialize)(Q,this,e)}},{key:"decodeUnchecked",value:function(e){return(0,_.deserializeUnchecked)(Q,this,e)}}]),e}(),$=function(e){(0,d.A)(r,e);var t=U(r);function r(e){var n;if((0,y.A)(this,r),(n=t.call(this,e)).enum="",1!==Object.keys(e).length)throw Error("Enum can only take single value");return Object.keys(e).map(function(e){n.enum=e}),n}return(0,k.A)(r)}(Z),Q=new Map,ee=32,et=32,er=1,en=function(e,t){(0,d.A)(s,e);var r,n,i,a=U(s);function s(e){var t;if((0,y.A)(this,s),(t=a.call(this,{}))._bn=void 0,void 0!==e._bn)t._bn=e._bn;else{if("string"==typeof e){var r=x().decode(e);if(r.length!=et)throw Error("Invalid public key input");t._bn=new(S())(r)}else t._bn=new(S())(e);if(t._bn.byteLength()>et)throw Error("Invalid public key input")}return t}return(0,k.A)(s,[{key:"equals",value:function(e){return this._bn.eq(e._bn)}},{key:"toBase58",value:function(){return x().encode(this.toBytes())}},{key:"toJSON",value:function(){return this.toBase58()}},{key:"toBytes",value:function(){var e=this.toBuffer();return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}},{key:"toBuffer",value:function(){var e=this._bn.toArrayLike(m.Buffer);if(e.length===et)return e;var t=m.Buffer.alloc(32);return e.copy(t,32-e.length),t}},{key:t,get:function(){return"PublicKey(".concat(this.toString(),")")}},{key:"toString",value:function(){return this.toBase58()}}],[{key:"unique",value:function(){var e=new s(er);return er+=1,new s(e.toBuffer())}},{key:"createWithSeed",value:(r=(0,h.A)(b().mark(function e(t,r,n){var i,a;return b().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=m.Buffer.concat([t.toBuffer(),m.Buffer.from(r),n.toBuffer()]),a=(0,I.sc)(i),e.abrupt("return",new s(a));case 3:case"end":return e.stop()}},e)})),function(e,t,n){return r.apply(this,arguments)})},{key:"createProgramAddressSync",value:function(e,t){var r=m.Buffer.alloc(0);e.forEach(function(e){if(e.length>ee)throw TypeError("Max seed length exceeded");r=m.Buffer.concat([r,X(e)])}),r=m.Buffer.concat([r,t.toBuffer(),m.Buffer.from("ProgramDerivedAddress")]);var n=(0,I.sc)(r);if(F(n))throw Error("Invalid seeds, address must fall off the curve");return new s(n)}},{key:"createProgramAddress",value:(n=(0,h.A)(b().mark(function e(t,r){return b().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.createProgramAddressSync(t,r));case 1:case"end":return e.stop()}},e,this)})),function(e,t){return n.apply(this,arguments)})},{key:"findProgramAddressSync",value:function(e,t){for(var r,n=255;0!=n;){try{var i=e.concat(m.Buffer.from([n]));r=this.createProgramAddressSync(i,t)}catch(e){if(e instanceof TypeError)throw e;n--;continue}return[r,n]}throw Error("Unable to find a viable program address nonce")}},{key:"findProgramAddress",value:(i=(0,h.A)(b().mark(function e(t,r){return b().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.findProgramAddressSync(t,r));case 1:case"end":return e.stop()}},e,this)})),function(e,t){return i.apply(this,arguments)})},{key:"isOnCurve",value:function(e){return F(new s(e).toBytes())}}]),s}(Z,Symbol.toStringTag);en.default=new en("11111111111111111111111111111111"),Q.set(en,{kind:"struct",fields:[["_bn","u256"]]});var ei=function(){function e(t){if((0,y.A)(this,e),this._publicKey=void 0,this._secretKey=void 0,t){var r=X(t);if(64!==t.length)throw Error("bad secret key size");this._publicKey=r.slice(32,64),this._secretKey=r.slice(0,32)}else this._secretKey=X(V()),this._publicKey=X(H(this._secretKey))}return(0,k.A)(e,[{key:"publicKey",get:function(){return new en(this._publicKey)}},{key:"secretKey",get:function(){return m.Buffer.concat([this._secretKey,this._publicKey],64)}}]),e}(),ea=new en("BPFLoader1111111111111111111111111111111111"),es=1232,eo=127,eu=64,ec=function(e){(0,d.A)(r,e);var t=U(r);function r(e){var n;return(0,y.A)(this,r),(n=t.call(this,"Signature ".concat(e," has expired: block height exceeded."))).signature=void 0,n.signature=e,n}return(0,k.A)(r)}((0,l.A)(Error));Object.defineProperty(ec.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});var el=function(e){(0,d.A)(r,e);var t=U(r);function r(e,n){var i;return(0,y.A)(this,r),(i=t.call(this,"Transaction was not confirmed in ".concat(n.toFixed(2)," seconds. It is ")+"unknown if it succeeded or failed. Check signature "+"".concat(e," using the Solana Explorer or CLI tools."))).signature=void 0,i.signature=e,i}return(0,k.A)(r)}((0,l.A)(Error));Object.defineProperty(el.prototype,"name",{value:"TransactionExpiredTimeoutError"});var eh=function(e){(0,d.A)(r,e);var t=U(r);function r(e){var n;return(0,y.A)(this,r),(n=t.call(this,"Signature ".concat(e," has expired: the nonce is no longer valid."))).signature=void 0,n.signature=e,n}return(0,k.A)(r)}((0,l.A)(Error));Object.defineProperty(eh.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});var ed=function(){function e(t,r){(0,y.A)(this,e),this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=t,this.accountKeysFromLookups=r}return(0,k.A)(e,[{key:"keySegments",value:function(){var e=[this.staticAccountKeys];return this.accountKeysFromLookups&&(e.push(this.accountKeysFromLookups.writable),e.push(this.accountKeysFromLookups.readonly)),e}},{key:"get",value:function(e){var t,r=j(this.keySegments());try{for(r.s();!(t=r.n()).done;){var n=t.value;if(e<n.length)return n[e];e-=n.length}}catch(e){r.e(e)}finally{r.f()}}},{key:"length",get:function(){return this.keySegments().flat().length}},{key:"compileInstructions",value:function(e){if(this.length>256)throw Error("Account index overflow encountered during compilation");var t=new Map;this.keySegments().flat().forEach(function(e,r){t.set(e.toBase58(),r)});var r=function(e){var r=t.get(e.toBase58());if(void 0===r)throw Error("Encountered an unknown instruction account key during compilation");return r};return e.map(function(e){return{programIdIndex:r(e.programId),accountKeyIndexes:e.keys.map(function(e){return r(e.pubkey)}),data:e.data}})}}]),e}(),ep=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"publicKey";return P.blob(32,e)},ef=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"signature";return P.blob(64,e)},ey=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"string",t=P.struct([P.u32("length"),P.u32("lengthPadding"),P.blob(P.offset(P.u32(),-8),"chars")],e),r=t.decode.bind(t),n=t.encode.bind(t);return t.decode=function(e,t){return r(e,t).chars.toString()},t.encode=function(e,t,r){return n({chars:m.Buffer.from(e,"utf8")},t,r)},t.alloc=function(e){return P.u32().span+P.u32().span+m.Buffer.from(e,"utf8").length},t};function ek(e){for(var t=0,r=0;;){var n=e.shift();if(t|=(127&n)<<7*r,r+=1,(128&n)==0)break}return t}function eg(e,t){for(var r=t;;){var n=127&r;if(0==(r>>=7)){e.push(n);break}n|=128,e.push(n)}}function eb(e,t){if(!e)throw Error(t||"Assertion failed")}var em=function(){function e(t,r){(0,y.A)(this,e),this.payer=void 0,this.keyMetaMap=void 0,this.payer=t,this.keyMetaMap=r}return(0,k.A)(e,[{key:"getMessageComponents",value:function(){var e=(0,c.A)(this.keyMetaMap.entries());eb(e.length<=256,"Max static account keys length exceeded");var t=e.filter(function(e){var t=(0,u.A)(e,2)[1];return t.isSigner&&t.isWritable}),r=e.filter(function(e){var t=(0,u.A)(e,2)[1];return t.isSigner&&!t.isWritable}),n=e.filter(function(e){var t=(0,u.A)(e,2)[1];return!t.isSigner&&t.isWritable}),i=e.filter(function(e){var t=(0,u.A)(e,2)[1];return!t.isSigner&&!t.isWritable}),a={numRequiredSignatures:t.length+r.length,numReadonlySignedAccounts:r.length,numReadonlyUnsignedAccounts:i.length};return eb(t.length>0,"Expected at least one writable signer key"),eb((0,u.A)(t[0],1)[0]===this.payer.toBase58(),"Expected first writable signer key to be the fee payer"),[a,[].concat((0,c.A)(t.map(function(e){return new en((0,u.A)(e,1)[0])})),(0,c.A)(r.map(function(e){return new en((0,u.A)(e,1)[0])})),(0,c.A)(n.map(function(e){return new en((0,u.A)(e,1)[0])})),(0,c.A)(i.map(function(e){return new en((0,u.A)(e,1)[0])})))]}},{key:"extractTableLookup",value:function(e){var t=this.drainKeysFoundInLookupTable(e.state.addresses,function(e){return!e.isSigner&&!e.isInvoked&&e.isWritable}),r=(0,u.A)(t,2),n=r[0],i=r[1],a=this.drainKeysFoundInLookupTable(e.state.addresses,function(e){return!e.isSigner&&!e.isInvoked&&!e.isWritable}),s=(0,u.A)(a,2),o=s[0],c=s[1];if(0!==n.length||0!==o.length)return[{accountKey:e.key,writableIndexes:n,readonlyIndexes:o},{writable:i,readonly:c}]}},{key:"drainKeysFoundInLookupTable",value:function(e,t){var r,n=this,i=[],a=[],s=j(this.keyMetaMap.entries());try{for(s.s();!(r=s.n()).done;)!function(){var s=(0,u.A)(r.value,2),o=s[0],c=s[1];if(t(c)){var l=new en(o),h=e.findIndex(function(e){return e.equals(l)});h>=0&&(eb(h<256,"Max lookup table index exceeded"),i.push(h),a.push(l),n.keyMetaMap.delete(o))}}()}catch(e){s.e(e)}finally{s.f()}return[i,a]}}],[{key:"compile",value:function(t,r){var n=new Map,i=function(e){var t=e.toBase58(),r=n.get(t);return void 0===r&&(r={isSigner:!1,isWritable:!1,isInvoked:!1},n.set(t,r)),r},a=i(r);a.isSigner=!0,a.isWritable=!0;var s,o=j(t);try{for(o.s();!(s=o.n()).done;){var u=s.value;i(u.programId).isInvoked=!0;var c,l=j(u.keys);try{for(l.s();!(c=l.n()).done;){var h=c.value,d=i(h.pubkey);d.isSigner||(d.isSigner=h.isSigner),d.isWritable||(d.isWritable=h.isWritable)}}catch(e){l.e(e)}finally{l.f()}}}catch(e){o.e(e)}finally{o.f()}return new e(r,n)}}]),e}(),ev="Reached end of buffer unexpectedly";function ew(e){if(0===e.length)throw Error(ev);return e.shift()}function eS(e){for(var t,r=arguments.length,n=Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];var a=n[0];if(2===n.length?a+(null!==(t=n[1])&&void 0!==t?t:0)>e.length:a>=e.length)throw Error(ev);return e.splice.apply(e,n)}var eA=function(){function e(t){var r=this;(0,y.A)(this,e),this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=t.header,this.accountKeys=t.accountKeys.map(function(e){return new en(e)}),this.recentBlockhash=t.recentBlockhash,this.instructions=t.instructions,this.instructions.forEach(function(e){return r.indexToProgramIds.set(e.programIdIndex,r.accountKeys[e.programIdIndex])})}return(0,k.A)(e,[{key:"version",get:function(){return"legacy"}},{key:"staticAccountKeys",get:function(){return this.accountKeys}},{key:"compiledInstructions",get:function(){return this.instructions.map(function(e){return{programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:x().decode(e.data)}})}},{key:"addressTableLookups",get:function(){return[]}},{key:"getAccountKeys",value:function(){return new ed(this.staticAccountKeys)}},{key:"isAccountSigner",value:function(e){return e<this.header.numRequiredSignatures}},{key:"isAccountWritable",value:function(e){var t=this.header.numRequiredSignatures;if(!(e>=this.header.numRequiredSignatures))return e<t-this.header.numReadonlySignedAccounts;var r=this.accountKeys.length-t-this.header.numReadonlyUnsignedAccounts;return e-t<r}},{key:"isProgramId",value:function(e){return this.indexToProgramIds.has(e)}},{key:"programIds",value:function(){return(0,c.A)(this.indexToProgramIds.values())}},{key:"nonProgramIds",value:function(){var e=this;return this.accountKeys.filter(function(t,r){return!e.isProgramId(r)})}},{key:"serialize",value:function(){var e=this.accountKeys.length,t=[];eg(t,e);var r=this.instructions.map(function(e){var t=e.accounts,r=e.programIdIndex,n=Array.from(x().decode(e.data)),i=[];eg(i,t.length);var a=[];return eg(a,n.length),{programIdIndex:r,keyIndicesCount:m.Buffer.from(i),keyIndices:t,dataLength:m.Buffer.from(a),data:n}}),n=[];eg(n,r.length);var i=m.Buffer.alloc(es);m.Buffer.from(n).copy(i);var a=n.length;r.forEach(function(e){var t=P.struct([P.u8("programIdIndex"),P.blob(e.keyIndicesCount.length,"keyIndicesCount"),P.seq(P.u8("keyIndex"),e.keyIndices.length,"keyIndices"),P.blob(e.dataLength.length,"dataLength"),P.seq(P.u8("userdatum"),e.data.length,"data")]).encode(e,i,a);a+=t}),i=i.slice(0,a);var s=P.struct([P.blob(1,"numRequiredSignatures"),P.blob(1,"numReadonlySignedAccounts"),P.blob(1,"numReadonlyUnsignedAccounts"),P.blob(t.length,"keyCount"),P.seq(ep("key"),e,"keys"),ep("recentBlockhash")]),o={numRequiredSignatures:m.Buffer.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:m.Buffer.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:m.Buffer.from([this.header.numReadonlyUnsignedAccounts]),keyCount:m.Buffer.from(t),keys:this.accountKeys.map(function(e){return X(e.toBytes())}),recentBlockhash:x().decode(this.recentBlockhash)},u=m.Buffer.alloc(2048),c=s.encode(o,u);return i.copy(u,c),u.slice(0,c+i.length)}}],[{key:"compile",value:function(t){var r=em.compile(t.instructions,t.payerKey).getMessageComponents(),n=(0,u.A)(r,2),i=n[0],a=n[1],s=new ed(a).compileInstructions(t.instructions).map(function(e){return{programIdIndex:e.programIdIndex,accounts:e.accountKeyIndexes,data:x().encode(e.data)}});return new e({header:i,accountKeys:a,recentBlockhash:t.recentBlockhash,instructions:s})}},{key:"from",value:function(t){var r=(0,c.A)(t),n=ew(r);if(n!==(n&eo))throw Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");for(var i=ew(r),a=ew(r),s=ek(r),o=[],u=0;u<s;u++){var l=eS(r,0,et);o.push(new en(m.Buffer.from(l)))}for(var h=eS(r,0,et),d=ek(r),p=[],f=0;f<d;f++){var y=ew(r),k=ek(r),g=eS(r,0,k),b=ek(r),v=eS(r,0,b),w=x().encode(m.Buffer.from(v));p.push({programIdIndex:y,accounts:g,data:w})}return new e({header:{numRequiredSignatures:n,numReadonlySignedAccounts:i,numReadonlyUnsignedAccounts:a},recentBlockhash:x().encode(m.Buffer.from(h)),accountKeys:o,instructions:p})}}]),e}(),ex=function(){function e(t){(0,y.A)(this,e),this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=t.header,this.staticAccountKeys=t.staticAccountKeys,this.recentBlockhash=t.recentBlockhash,this.compiledInstructions=t.compiledInstructions,this.addressTableLookups=t.addressTableLookups}return(0,k.A)(e,[{key:"version",get:function(){return 0}},{key:"numAccountKeysFromLookups",get:function(){var e,t=0,r=j(this.addressTableLookups);try{for(r.s();!(e=r.n()).done;){var n=e.value;t+=n.readonlyIndexes.length+n.writableIndexes.length}}catch(e){r.e(e)}finally{r.f()}return t}},{key:"getAccountKeys",value:function(e){var t;if(e&&"accountKeysFromLookups"in e&&e.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=e.accountKeysFromLookups.writable.length+e.accountKeysFromLookups.readonly.length)throw Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");t=e.accountKeysFromLookups}else if(e&&"addressLookupTableAccounts"in e&&e.addressLookupTableAccounts)t=this.resolveAddressTableLookups(e.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw Error("Failed to get account keys because address table lookups were not resolved");return new ed(this.staticAccountKeys,t)}},{key:"isAccountSigner",value:function(e){return e<this.header.numRequiredSignatures}},{key:"isAccountWritable",value:function(e){var t=this.header.numRequiredSignatures,r=this.staticAccountKeys.length;if(e>=r)return e-r<this.addressTableLookups.reduce(function(e,t){return e+t.writableIndexes.length},0);if(!(e>=this.header.numRequiredSignatures))return e<t-this.header.numReadonlySignedAccounts;var n=r-t-this.header.numReadonlyUnsignedAccounts;return e-t<n}},{key:"resolveAddressTableLookups",value:function(e){var t,r={writable:[],readonly:[]},n=j(this.addressTableLookups);try{for(n.s();!(t=n.n()).done;)!function(){var n=t.value,i=e.find(function(e){return e.key.equals(n.accountKey)});if(!i)throw Error("Failed to find address lookup table account for table key ".concat(n.accountKey.toBase58()));var a,s=j(n.writableIndexes);try{for(s.s();!(a=s.n()).done;){var o=a.value;if(o<i.state.addresses.length)r.writable.push(i.state.addresses[o]);else throw Error("Failed to find address for index ".concat(o," in address lookup table ").concat(n.accountKey.toBase58()))}}catch(e){s.e(e)}finally{s.f()}var u,c=j(n.readonlyIndexes);try{for(c.s();!(u=c.n()).done;){var l=u.value;if(l<i.state.addresses.length)r.readonly.push(i.state.addresses[l]);else throw Error("Failed to find address for index ".concat(l," in address lookup table ").concat(n.accountKey.toBase58()))}}catch(e){c.e(e)}finally{c.f()}}()}catch(e){n.e(e)}finally{n.f()}return r}},{key:"serialize",value:function(){var e=[];eg(e,this.staticAccountKeys.length);var t=this.serializeInstructions(),r=[];eg(r,this.compiledInstructions.length);var n=this.serializeAddressTableLookups(),i=[];eg(i,this.addressTableLookups.length);var a=P.struct([P.u8("prefix"),P.struct([P.u8("numRequiredSignatures"),P.u8("numReadonlySignedAccounts"),P.u8("numReadonlyUnsignedAccounts")],"header"),P.blob(e.length,"staticAccountKeysLength"),P.seq(ep(),this.staticAccountKeys.length,"staticAccountKeys"),ep("recentBlockhash"),P.blob(r.length,"instructionsLength"),P.blob(t.length,"serializedInstructions"),P.blob(i.length,"addressTableLookupsLength"),P.blob(n.length,"serializedAddressTableLookups")]),s=new Uint8Array(es),o=a.encode({prefix:128,header:this.header,staticAccountKeysLength:new Uint8Array(e),staticAccountKeys:this.staticAccountKeys.map(function(e){return e.toBytes()}),recentBlockhash:x().decode(this.recentBlockhash),instructionsLength:new Uint8Array(r),serializedInstructions:t,addressTableLookupsLength:new Uint8Array(i),serializedAddressTableLookups:n},s);return s.slice(0,o)}},{key:"serializeInstructions",value:function(){var e,t=0,r=new Uint8Array(es),n=j(this.compiledInstructions);try{for(n.s();!(e=n.n()).done;){var i=e.value,a=[];eg(a,i.accountKeyIndexes.length);var s=[];eg(s,i.data.length);var o=P.struct([P.u8("programIdIndex"),P.blob(a.length,"encodedAccountKeyIndexesLength"),P.seq(P.u8(),i.accountKeyIndexes.length,"accountKeyIndexes"),P.blob(s.length,"encodedDataLength"),P.blob(i.data.length,"data")]);t+=o.encode({programIdIndex:i.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(a),accountKeyIndexes:i.accountKeyIndexes,encodedDataLength:new Uint8Array(s),data:i.data},r,t)}}catch(e){n.e(e)}finally{n.f()}return r.slice(0,t)}},{key:"serializeAddressTableLookups",value:function(){var e,t=0,r=new Uint8Array(es),n=j(this.addressTableLookups);try{for(n.s();!(e=n.n()).done;){var i=e.value,a=[];eg(a,i.writableIndexes.length);var s=[];eg(s,i.readonlyIndexes.length);var o=P.struct([ep("accountKey"),P.blob(a.length,"encodedWritableIndexesLength"),P.seq(P.u8(),i.writableIndexes.length,"writableIndexes"),P.blob(s.length,"encodedReadonlyIndexesLength"),P.seq(P.u8(),i.readonlyIndexes.length,"readonlyIndexes")]);t+=o.encode({accountKey:i.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(a),writableIndexes:i.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(s),readonlyIndexes:i.readonlyIndexes},r,t)}}catch(e){n.e(e)}finally{n.f()}return r.slice(0,t)}}],[{key:"compile",value:function(t){var r,n=em.compile(t.instructions,t.payerKey),i=[],a={writable:[],readonly:[]},s=j(t.addressLookupTableAccounts||[]);try{for(s.s();!(r=s.n()).done;){var o=r.value,l=n.extractTableLookup(o);if(void 0!==l){var h,d,p=(0,u.A)(l,2),f=p[0],y=p[1],k=y.writable,g=y.readonly;i.push(f),(h=a.writable).push.apply(h,(0,c.A)(k)),(d=a.readonly).push.apply(d,(0,c.A)(g))}}}catch(e){s.e(e)}finally{s.f()}var b=n.getMessageComponents(),m=(0,u.A)(b,2),v=m[0],w=m[1],S=new ed(w,a).compileInstructions(t.instructions);return new e({header:v,staticAccountKeys:w,recentBlockhash:t.recentBlockhash,compiledInstructions:S,addressTableLookups:i})}},{key:"deserialize",value:function(t){var r=(0,c.A)(t),n=ew(r),i=n&eo;eb(n!==i,"Expected versioned message but received legacy message"),eb(0===i,"Expected versioned message with version 0 but found version ".concat(i));for(var a={numRequiredSignatures:ew(r),numReadonlySignedAccounts:ew(r),numReadonlyUnsignedAccounts:ew(r)},s=[],o=ek(r),u=0;u<o;u++)s.push(new en(eS(r,0,et)));for(var l=x().encode(eS(r,0,et)),h=ek(r),d=[],p=0;p<h;p++){var f=ew(r),y=ek(r),k=eS(r,0,y),g=ek(r),b=new Uint8Array(eS(r,0,g));d.push({programIdIndex:f,accountKeyIndexes:k,data:b})}for(var m=ek(r),v=[],w=0;w<m;w++){var S=new en(eS(r,0,et)),A=ek(r),I=eS(r,0,A),_=ek(r),P=eS(r,0,_);v.push({accountKey:S,writableIndexes:I,readonlyIndexes:P})}return new e({header:a,staticAccountKeys:s,recentBlockhash:l,compiledInstructions:d,addressTableLookups:v})}}]),e}(),eI={deserializeMessageVersion:function(e){var t=e[0],r=t&eo;return r===t?"legacy":r},deserialize:function(e){var t=eI.deserializeMessageVersion(e);if("legacy"===t)return eA.from(e);if(0===t)return ex.deserialize(e);throw Error("Transaction message version ".concat(t," deserialization is not supported"))}},e_=function(e){return e[e.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",e[e.PROCESSED=1]="PROCESSED",e[e.TIMED_OUT=2]="TIMED_OUT",e[e.NONCE_INVALID=3]="NONCE_INVALID",e}({}),eP=m.Buffer.alloc(eu).fill(0),eE=function(){function e(t){(0,y.A)(this,e),this.keys=void 0,this.programId=void 0,this.data=m.Buffer.alloc(0),this.programId=t.programId,this.keys=t.keys,t.data&&(this.data=t.data)}return(0,k.A)(e,[{key:"toJSON",value:function(){return{keys:this.keys.map(function(e){var t=e.pubkey,r=e.isSigner,n=e.isWritable;return{pubkey:t.toJSON(),isSigner:r,isWritable:n}}),programId:this.programId.toJSON(),data:(0,c.A)(this.data)}}}]),e}(),eB=function(){var e;function t(e){if((0,y.A)(this,t),this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,e){if(e.feePayer&&(this.feePayer=e.feePayer),e.signatures&&(this.signatures=e.signatures),Object.prototype.hasOwnProperty.call(e,"nonceInfo")){var r=e.minContextSlot,n=e.nonceInfo;this.minNonceContextSlot=r,this.nonceInfo=n}else if(Object.prototype.hasOwnProperty.call(e,"lastValidBlockHeight")){var i=e.blockhash,a=e.lastValidBlockHeight;this.recentBlockhash=i,this.lastValidBlockHeight=a}else{var s=e.recentBlockhash,o=e.nonceInfo;o&&(this.nonceInfo=o),this.recentBlockhash=s}}}return(0,k.A)(t,[{key:"signature",get:function(){return this.signatures.length>0?this.signatures[0].signature:null}},{key:"toJSON",value:function(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(function(e){return e.toJSON()}),signers:this.signatures.map(function(e){return e.publicKey.toJSON()})}}},{key:"add",value:function(){for(var e=this,t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];if(0===r.length)throw Error("No instructions");return r.forEach(function(t){"instructions"in t?e.instructions=e.instructions.concat(t.instructions):"data"in t&&"programId"in t&&"keys"in t?e.instructions.push(t):e.instructions.push(new eE(t))}),this}},{key:"compileMessage",value:function(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;if(this.nonceInfo?(o=this.nonceInfo.nonce,l=this.instructions[0]!=this.nonceInfo.nonceInstruction?[this.nonceInfo.nonceInstruction].concat((0,c.A)(this.instructions)):this.instructions):(o=this.recentBlockhash,l=this.instructions),!o)throw Error("Transaction recentBlockhash required");if(l.length<1&&console.warn("No instructions provided"),this.feePayer)h=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)h=this.signatures[0].publicKey;else throw Error("Transaction fee payer required");for(var e=0;e<l.length;e++)if(void 0===l[e].programId)throw Error("Transaction instruction index ".concat(e," has undefined program id"));var t=[],r=[];l.forEach(function(e){e.keys.forEach(function(e){r.push(Y({},e))});var n=e.programId.toString();t.includes(n)||t.push(n)}),t.forEach(function(e){r.push({pubkey:new en(e),isSigner:!1,isWritable:!1})});var n=[];r.forEach(function(e){var t=e.pubkey.toString(),r=n.findIndex(function(e){return e.pubkey.toString()===t});r>-1?(n[r].isWritable=n[r].isWritable||e.isWritable,n[r].isSigner=n[r].isSigner||e.isSigner):n.push(e)}),n.sort(function(e,t){return e.isSigner!==t.isSigner?e.isSigner?-1:1:e.isWritable!==t.isWritable?e.isWritable?-1:1:e.pubkey.toBase58().localeCompare(t.pubkey.toBase58(),"en",{localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"})});var i=n.findIndex(function(e){return e.pubkey.equals(h)});if(i>-1){var a=n.splice(i,1),s=(0,u.A)(a,1)[0];s.isSigner=!0,s.isWritable=!0,n.unshift(s)}else n.unshift({pubkey:h,isSigner:!0,isWritable:!0});var o,l,h,d,p=j(this.signatures);try{for(p.s();!(d=p.n()).done;)!function(){var e=d.value,t=n.findIndex(function(t){return t.pubkey.equals(e.publicKey)});if(t>-1)n[t].isSigner||(n[t].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw Error("unknown signer: ".concat(e.publicKey.toString()))}()}catch(e){p.e(e)}finally{p.f()}var f=0,y=0,k=0,g=[],b=[];n.forEach(function(e){var t=e.pubkey,r=e.isSigner,n=e.isWritable;r?(g.push(t.toString()),f+=1,n||(y+=1)):(b.push(t.toString()),n||(k+=1))});var m=g.concat(b),v=l.map(function(e){var t=e.data,r=e.programId;return{programIdIndex:m.indexOf(r.toString()),accounts:e.keys.map(function(e){return m.indexOf(e.pubkey.toString())}),data:x().encode(t)}});return v.forEach(function(e){eb(e.programIdIndex>=0),e.accounts.forEach(function(e){return eb(e>=0)})}),new eA({header:{numRequiredSignatures:f,numReadonlySignedAccounts:y,numReadonlyUnsignedAccounts:k},accountKeys:m,recentBlockhash:o,instructions:v})}},{key:"_compile",value:function(){var e=this.compileMessage(),t=e.accountKeys.slice(0,e.header.numRequiredSignatures);return this.signatures.length===t.length&&this.signatures.every(function(e,r){return t[r].equals(e.publicKey)})||(this.signatures=t.map(function(e){return{signature:null,publicKey:e}})),e}},{key:"serializeMessage",value:function(){return this._compile().serialize()}},{key:"getEstimatedFee",value:(e=(0,h.A)(b().mark(function e(t){return b().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getFeeForMessage(this.compileMessage());case 2:return e.abrupt("return",e.sent.value);case 3:case"end":return e.stop()}},e,this)})),function(t){return e.apply(this,arguments)})},{key:"setSigners",value:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];if(0===t.length)throw Error("No signers");var n=new Set;this.signatures=t.filter(function(e){var t=e.toString();return!n.has(t)&&(n.add(t),!0)}).map(function(e){return{signature:null,publicKey:e}})}},{key:"sign",value:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];if(0===t.length)throw Error("No signers");for(var n=new Set,i=[],a=0;a<t.length;a++){var s=t[a],o=s.publicKey.toString();n.has(o)||(n.add(o),i.push(s))}this.signatures=i.map(function(e){return{signature:null,publicKey:e.publicKey}});var u=this._compile();this._partialSign.apply(this,[u].concat(i))}},{key:"partialSign",value:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];if(0===t.length)throw Error("No signers");for(var n=new Set,i=[],a=0;a<t.length;a++){var s=t[a],o=s.publicKey.toString();n.has(o)||(n.add(o),i.push(s))}var u=this._compile();this._partialSign.apply(this,[u].concat(i))}},{key:"_partialSign",value:function(e){for(var t=this,r=e.serialize(),n=arguments.length,i=Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];i.forEach(function(e){var n=J(r,e.secretKey);t._addSignature(e.publicKey,X(n))})}},{key:"addSignature",value:function(e,t){this._compile(),this._addSignature(e,t)}},{key:"_addSignature",value:function(e,t){eb(64===t.length);var r=this.signatures.findIndex(function(t){return e.equals(t.publicKey)});if(r<0)throw Error("unknown signer: ".concat(e.toString()));this.signatures[r].signature=m.Buffer.from(t)}},{key:"verifySignatures",value:function(){var e=!(arguments.length>0)||void 0===arguments[0]||arguments[0];return!this._getMessageSignednessErrors(this.serializeMessage(),e)}},{key:"_getMessageSignednessErrors",value:function(e,t){var r,n={},i=j(this.signatures);try{for(i.s();!(r=i.n()).done;){var a=r.value,s=a.signature,o=a.publicKey;null===s?t&&(n.missing||(n.missing=[])).push(o):G(s,e,o.toBytes())||(n.invalid||(n.invalid=[])).push(o)}}catch(e){i.e(e)}finally{i.f()}return n.invalid||n.missing?n:void 0}},{key:"serialize",value:function(e){var t=Object.assign({requireAllSignatures:!0,verifySignatures:!0},e),r=t.requireAllSignatures,n=t.verifySignatures,i=this.serializeMessage();if(n){var a=this._getMessageSignednessErrors(i,r);if(a){var s="Signature verification failed.";throw a.invalid&&(s+="\nInvalid signature for public key".concat(1===a.invalid.length?"":"(s)"," [`").concat(a.invalid.map(function(e){return e.toBase58()}).join("`, `"),"`].")),a.missing&&(s+="\nMissing signature for public key".concat(1===a.missing.length?"":"(s)"," [`").concat(a.missing.map(function(e){return e.toBase58()}).join("`, `"),"`].")),Error(s)}}return this._serialize(i)}},{key:"_serialize",value:function(e){var t=this.signatures,r=[];eg(r,t.length);var n=r.length+64*t.length+e.length,i=m.Buffer.alloc(n);return eb(t.length<256),m.Buffer.from(r).copy(i,0),t.forEach(function(e,t){var n=e.signature;null!==n&&(eb(64===n.length,"signature has invalid length"),m.Buffer.from(n).copy(i,r.length+64*t))}),e.copy(i,r.length+64*t.length),eb(i.length<=es,"Transaction too large: ".concat(i.length," > ").concat(es)),i}},{key:"keys",get:function(){return eb(1===this.instructions.length),this.instructions[0].keys.map(function(e){return e.pubkey})}},{key:"programId",get:function(){return eb(1===this.instructions.length),this.instructions[0].programId}},{key:"data",get:function(){return eb(1===this.instructions.length),this.instructions[0].data}}],[{key:"from",value:function(e){for(var r=(0,c.A)(e),n=ek(r),i=[],a=0;a<n;a++){var s=eS(r,0,eu);i.push(x().encode(m.Buffer.from(s)))}return t.populate(eA.from(r),i)}},{key:"populate",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=new t;return n.recentBlockhash=e.recentBlockhash,e.header.numRequiredSignatures>0&&(n.feePayer=e.accountKeys[0]),r.forEach(function(t,r){var i={signature:t==x().encode(eP)?null:x().decode(t),publicKey:e.accountKeys[r]};n.signatures.push(i)}),e.instructions.forEach(function(t){var r=t.accounts.map(function(t){var r=e.accountKeys[t];return{pubkey:r,isSigner:n.signatures.some(function(e){return e.publicKey.toString()===r.toString()})||e.isAccountSigner(t),isWritable:e.isAccountWritable(t)}});n.instructions.push(new eE({keys:r,programId:e.accountKeys[t.programIdIndex],data:x().decode(t.data)}))}),n._message=e,n._json=n.toJSON(),n}}]),t}(),eT=function(){function e(t){(0,y.A)(this,e),this.payerKey=void 0,this.instructions=void 0,this.recentBlockhash=void 0,this.payerKey=t.payerKey,this.instructions=t.instructions,this.recentBlockhash=t.recentBlockhash}return(0,k.A)(e,[{key:"compileToLegacyMessage",value:function(){return eA.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions})}},{key:"compileToV0Message",value:function(e){return ex.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions,addressLookupTableAccounts:e})}}],[{key:"decompile",value:function(t,r){var n=t.header,i=t.compiledInstructions,a=t.recentBlockhash,s=n.numRequiredSignatures,o=n.numReadonlySignedAccounts,u=n.numReadonlyUnsignedAccounts,c=s-o;eb(c>0,"Message header is invalid");var l=t.staticAccountKeys.length-s-u;eb(l>=0,"Message header is invalid");var h=t.getAccountKeys(r),d=h.get(0);if(void 0===d)throw Error("Failed to decompile message because no account keys were found");var p,f=[],y=j(i);try{for(y.s();!(p=y.n()).done;){var k,g=p.value,b=[],m=j(g.accountKeyIndexes);try{for(m.s();!(k=m.n()).done;){var v=k.value,w=h.get(v);if(void 0===w)throw Error("Failed to find key for account key index ".concat(v));var S=v<s,A=void 0;A=S?v<c:v<h.staticAccountKeys.length?v-s<l:v-h.staticAccountKeys.length<h.accountKeysFromLookups.writable.length,b.push({pubkey:w,isSigner:v<n.numRequiredSignatures,isWritable:A})}}catch(e){m.e(e)}finally{m.f()}var x=h.get(g.programIdIndex);if(void 0===x)throw Error("Failed to find program id for program id index ".concat(g.programIdIndex));f.push(new eE({programId:x,data:X(g.data),keys:b}))}}catch(e){y.e(e)}finally{y.f()}return new e({payerKey:d,instructions:f,recentBlockhash:a})}}]),e}(),eW=function(){function e(t,r){if((0,y.A)(this,e),this.signatures=void 0,this.message=void 0,void 0!==r)eb(r.length===t.header.numRequiredSignatures,"Expected signatures length to be equal to the number of required signatures"),this.signatures=r;else{for(var n=[],i=0;i<t.header.numRequiredSignatures;i++)n.push(new Uint8Array(eu));this.signatures=n}this.message=t}return(0,k.A)(e,[{key:"version",get:function(){return this.message.version}},{key:"serialize",value:function(){var e=this.message.serialize(),t=[];eg(t,this.signatures.length);var r=P.struct([P.blob(t.length,"encodedSignaturesLength"),P.seq(ef(),this.signatures.length,"signatures"),P.blob(e.length,"serializedMessage")]),n=new Uint8Array(2048),i=r.encode({encodedSignaturesLength:new Uint8Array(t),signatures:this.signatures,serializedMessage:e},n);return n.slice(0,i)}},{key:"sign",value:function(e){var t,r=this,n=this.message.serialize(),i=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures),a=j(e);try{for(a.s();!(t=a.n()).done;)!function(){var e=t.value,a=i.findIndex(function(t){return t.equals(e.publicKey)});eb(a>=0,"Cannot sign with non signer key ".concat(e.publicKey.toBase58())),r.signatures[a]=J(n,e.secretKey)}()}catch(e){a.e(e)}finally{a.f()}}},{key:"addSignature",value:function(e,t){eb(64===t.byteLength,"Signature must be 64 bytes long");var r=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures).findIndex(function(t){return t.equals(e)});eb(r>=0,"Can not add signature; `".concat(e.toBase58(),"` is not required to sign this transaction")),this.signatures[r]=t}}],[{key:"deserialize",value:function(t){for(var r=(0,c.A)(t),n=[],i=ek(r),a=0;a<i;a++)n.push(new Uint8Array(eS(r,0,eu)));return new e(eI.deserialize(new Uint8Array(r)),n)}}]),e}(),eO=new en("SysvarC1ock11111111111111111111111111111111"),eR=new en("SysvarEpochSchedu1e111111111111111111111111"),eC=new en("Sysvar1nstructions1111111111111111111111111"),eN=new en("SysvarRecentB1ockHashes11111111111111111111"),eL=new en("SysvarRent111111111111111111111111111111111"),eK=new en("SysvarRewards111111111111111111111111111111"),ez=new en("SysvarS1otHashes111111111111111111111111111"),eq=new en("SysvarS1otHistory11111111111111111111111111"),eY=new en("SysvarStakeHistory1111111111111111111111111"),ej=function(e){(0,d.A)(n,e);var t,r=U(n);function n(e){var t,i,a=e.action,s=e.signature,o=e.transactionMessage,u=e.logs;(0,y.A)(this,n);var c=u?"Logs: \n".concat(JSON.stringify(u.slice(-10),null,2),". "):"",l="\nCatch the `SendTransactionError` and call `getLogs()` on it for full details.";switch(a){case"send":i="Transaction ".concat(s," resulted in an error. \n")+"".concat(o,". ")+c+l;break;case"simulate":i="Simulation failed. \nMessage: ".concat(o,". \n")+c+l;break;default:i="Unknown action '".concat(a,"'")}return(t=r.call(this,i)).signature=void 0,t.transactionMessage=void 0,t.transactionLogs=void 0,t.signature=s,t.transactionMessage=o,t.transactionLogs=u||void 0,t}return(0,k.A)(n,[{key:"transactionError",get:function(){return{message:this.transactionMessage,logs:Array.isArray(this.transactionLogs)?this.transactionLogs:void 0}}},{key:"logs",get:function(){var e=this.transactionLogs;if(null==e||"object"!=typeof e||!("then"in e))return e}},{key:"getLogs",value:(t=(0,h.A)(b().mark(function e(t){var r=this;return b().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return Array.isArray(this.transactionLogs)||(this.transactionLogs=new Promise(function(e,n){t.getTransaction(r.signature).then(function(t){if(t&&t.meta&&t.meta.logMessages){var i=t.meta.logMessages;r.transactionLogs=i,e(i)}else n(Error("Log messages not found"))}).catch(n)})),e.next=3,this.transactionLogs;case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e,this)})),function(e){return t.apply(this,arguments)})}]),n}((0,l.A)(Error)),eM={JSON_RPC_SERVER_ERROR_BLOCK_CLEANED_UP:-32001,JSON_RPC_SERVER_ERROR_SEND_TRANSACTION_PREFLIGHT_FAILURE:-32002,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_VERIFICATION_FAILURE:-32003,JSON_RPC_SERVER_ERROR_BLOCK_NOT_AVAILABLE:-32004,JSON_RPC_SERVER_ERROR_NODE_UNHEALTHY:-32005,JSON_RPC_SERVER_ERROR_TRANSACTION_PRECOMPILE_VERIFICATION_FAILURE:-32006,JSON_RPC_SERVER_ERROR_SLOT_SKIPPED:-32007,JSON_RPC_SERVER_ERROR_NO_SNAPSHOT:-32008,JSON_RPC_SERVER_ERROR_LONG_TERM_STORAGE_SLOT_SKIPPED:-32009,JSON_RPC_SERVER_ERROR_KEY_EXCLUDED_FROM_SECONDARY_INDEX:-32010,JSON_RPC_SERVER_ERROR_TRANSACTION_HISTORY_NOT_AVAILABLE:-32011,JSON_RPC_SCAN_ERROR:-32012,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_LEN_MISMATCH:-32013,JSON_RPC_SERVER_ERROR_BLOCK_STATUS_NOT_AVAILABLE_YET:-32014,JSON_RPC_SERVER_ERROR_UNSUPPORTED_TRANSACTION_VERSION:-32015,JSON_RPC_SERVER_ERROR_MIN_CONTEXT_SLOT_NOT_REACHED:-32016},eU=function(e){(0,d.A)(r,e);var t=U(r);function r(e,n){var i,a=e.code,s=e.message,o=e.data;return(0,y.A)(this,r),(i=t.call(this,null!=n?"".concat(n,": ").concat(s):s)).code=void 0,i.data=void 0,i.code=a,i.data=o,i.name="SolanaJSONRPCError",i}return(0,k.A)(r)}((0,l.A)(Error));function eV(e,t,r,n){return eD.apply(this,arguments)}function eD(){return(eD=(0,h.A)(b().mark(function e(t,r,n,i){var a,s,o,u;return b().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=i&&{skipPreflight:i.skipPreflight,preflightCommitment:i.preflightCommitment||i.commitment,maxRetries:i.maxRetries,minContextSlot:i.minContextSlot},e.next=3,t.sendTransaction(r,n,a);case 3:if(s=e.sent,!(null!=r.recentBlockhash&&null!=r.lastValidBlockHeight)){e.next=10;break}return e.next=7,t.confirmTransaction({abortSignal:null==i?void 0:i.abortSignal,signature:s,blockhash:r.recentBlockhash,lastValidBlockHeight:r.lastValidBlockHeight},i&&i.commitment);case 7:case 15:o=e.sent.value,e.next=22;break;case 10:if(!(null!=r.minNonceContextSlot&&null!=r.nonceInfo)){e.next=18;break}return u=r.nonceInfo.nonceInstruction.keys[0].pubkey,e.next=15,t.confirmTransaction({abortSignal:null==i?void 0:i.abortSignal,minContextSlot:r.minNonceContextSlot,nonceAccountPubkey:u,nonceValue:r.nonceInfo.nonce,signature:s},i&&i.commitment);case 18:return(null==i?void 0:i.abortSignal)!=null&&console.warn("sendAndConfirmTransaction(): A transaction with a deprecated confirmation strategy was supplied along with an `abortSignal`. Only transactions having `lastValidBlockHeight` or a combination of `nonceInfo` and `minNonceContextSlot` are abortable."),e.next=21,t.confirmTransaction(s,i&&i.commitment);case 21:o=e.sent.value;case 22:if(!o.err){e.next=26;break}if(!(null!=s)){e.next=25;break}throw new ej({action:"send",signature:s,transactionMessage:"Status: (".concat(JSON.stringify(o),")")});case 25:throw Error("Transaction ".concat(s," failed (").concat(JSON.stringify(o),")"));case 26:return e.abrupt("return",s);case 27:case"end":return e.stop()}},e)}))).apply(this,arguments)}function eH(e){return new Promise(function(t){return setTimeout(t,e)})}function eF(e,t){var r=e.layout.span>=0?e.layout.span:function e(t,r){var n=function t(n){if(n.span>=0)return n.span;if("function"==typeof n.alloc)return n.alloc(r[n.property]);if("count"in n&&"elementLayout"in n){var i=r[n.property];if(Array.isArray(i))return i.length*t(n.elementLayout)}else if("fields"in n)return e({layout:n},r[n.property]);return 0},i=0;return t.layout.fields.forEach(function(e){i+=n(e)}),i}(e,t),n=m.Buffer.alloc(r),i=Object.assign({instruction:e.index},t);return e.layout.encode(i,n),n}function eJ(e,t){var r;try{r=e.layout.decode(t)}catch(e){throw Error("invalid instruction; "+e)}if(r.instruction!==e.index)throw Error("invalid instruction; instruction index mismatch ".concat(r.instruction," != ").concat(e.index));return r}var eG=P.nu64("lamportsPerSignature"),eX=P.struct([P.u32("version"),P.u32("state"),ep("authorizedPubkey"),ep("nonce"),P.struct([eG],"feeCalculator")]),eZ=eX.span,e$=function(){function e(t){(0,y.A)(this,e),this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=t.authorizedPubkey,this.nonce=t.nonce,this.feeCalculator=t.feeCalculator}return(0,k.A)(e,null,[{key:"fromAccountData",value:function(t){var r=eX.decode(X(t),0);return new e({authorizedPubkey:new en(r.authorizedPubkey),nonce:new en(r.nonce).toString(),feeCalculator:r.feeCalculator})}}]),e}(),eQ=function(e){var t=(0,P.blob)(8,e),r={decode:t.decode.bind(t),encode:t.encode.bind(t)},n=r.encode,i=r.decode;return t.decode=function(e,t){var r=i(e,t);return(0,E.toBigIntLE)(m.Buffer.from(r))},t.encode=function(e,t,r){return n((0,E.toBufferLE)(e,8),t,r)},t},e0=function(){function e(){(0,y.A)(this,e)}return(0,k.A)(e,null,[{key:"decodeInstructionType",value:function(e){this.checkProgramId(e.programId);for(var t,r=P.u32("instruction").decode(e.data),n=0,i=Object.entries(e1);n<i.length;n++){var a=(0,u.A)(i[n],2),s=a[0];if(a[1].index==r){t=s;break}}if(!t)throw Error("Instruction type incorrect; not a SystemInstruction");return t}},{key:"decodeCreateAccount",value:function(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);var t=eJ(e1.Create,e.data),r=t.lamports,n=t.space,i=t.programId;return{fromPubkey:e.keys[0].pubkey,newAccountPubkey:e.keys[1].pubkey,lamports:r,space:n,programId:new en(i)}}},{key:"decodeTransfer",value:function(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);var t=eJ(e1.Transfer,e.data).lamports;return{fromPubkey:e.keys[0].pubkey,toPubkey:e.keys[1].pubkey,lamports:t}}},{key:"decodeTransferWithSeed",value:function(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);var t=eJ(e1.TransferWithSeed,e.data),r=t.lamports,n=t.seed,i=t.programId;return{fromPubkey:e.keys[0].pubkey,basePubkey:e.keys[1].pubkey,toPubkey:e.keys[2].pubkey,lamports:r,seed:n,programId:new en(i)}}},{key:"decodeAllocate",value:function(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);var t=eJ(e1.Allocate,e.data).space;return{accountPubkey:e.keys[0].pubkey,space:t}}},{key:"decodeAllocateWithSeed",value:function(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);var t=eJ(e1.AllocateWithSeed,e.data),r=t.base,n=t.seed,i=t.space,a=t.programId;return{accountPubkey:e.keys[0].pubkey,basePubkey:new en(r),seed:n,space:i,programId:new en(a)}}},{key:"decodeAssign",value:function(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);var t=eJ(e1.Assign,e.data).programId;return{accountPubkey:e.keys[0].pubkey,programId:new en(t)}}},{key:"decodeAssignWithSeed",value:function(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);var t=eJ(e1.AssignWithSeed,e.data),r=t.base,n=t.seed,i=t.programId;return{accountPubkey:e.keys[0].pubkey,basePubkey:new en(r),seed:n,programId:new en(i)}}},{key:"decodeCreateWithSeed",value:function(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);var t=eJ(e1.CreateWithSeed,e.data),r=t.base,n=t.seed,i=t.lamports,a=t.space,s=t.programId;return{fromPubkey:e.keys[0].pubkey,newAccountPubkey:e.keys[1].pubkey,basePubkey:new en(r),seed:n,lamports:i,space:a,programId:new en(s)}}},{key:"decodeNonceInitialize",value:function(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);var t=eJ(e1.InitializeNonceAccount,e.data).authorized;return{noncePubkey:e.keys[0].pubkey,authorizedPubkey:new en(t)}}},{key:"decodeNonceAdvance",value:function(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3),eJ(e1.AdvanceNonceAccount,e.data),{noncePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey}}},{key:"decodeNonceWithdraw",value:function(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,5);var t=eJ(e1.WithdrawNonceAccount,e.data).lamports;return{noncePubkey:e.keys[0].pubkey,toPubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[4].pubkey,lamports:t}}},{key:"decodeNonceAuthorize",value:function(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);var t=eJ(e1.AuthorizeNonceAccount,e.data).authorized;return{noncePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[1].pubkey,newAuthorizedPubkey:new en(t)}}},{key:"checkProgramId",value:function(e){if(!e.equals(e2.programId))throw Error("invalid instruction; programId is not SystemProgram")}},{key:"checkKeyLength",value:function(e,t){if(e.length<t)throw Error("invalid instruction; found ".concat(e.length," keys, expected at least ").concat(t))}}]),e}(),e1=Object.freeze({Create:{index:0,layout:P.struct([P.u32("instruction"),P.ns64("lamports"),P.ns64("space"),ep("programId")])},Assign:{index:1,layout:P.struct([P.u32("instruction"),ep("programId")])},Transfer:{index:2,layout:P.struct([P.u32("instruction"),eQ("lamports")])},CreateWithSeed:{index:3,layout:P.struct([P.u32("instruction"),ep("base"),ey("seed"),P.ns64("lamports"),P.ns64("space"),ep("programId")])},AdvanceNonceAccount:{index:4,layout:P.struct([P.u32("instruction")])},WithdrawNonceAccount:{index:5,layout:P.struct([P.u32("instruction"),P.ns64("lamports")])},InitializeNonceAccount:{index:6,layout:P.struct([P.u32("instruction"),ep("authorized")])},AuthorizeNonceAccount:{index:7,layout:P.struct([P.u32("instruction"),ep("authorized")])},Allocate:{index:8,layout:P.struct([P.u32("instruction"),P.ns64("space")])},AllocateWithSeed:{index:9,layout:P.struct([P.u32("instruction"),ep("base"),ey("seed"),P.ns64("space"),ep("programId")])},AssignWithSeed:{index:10,layout:P.struct([P.u32("instruction"),ep("base"),ey("seed"),ep("programId")])},TransferWithSeed:{index:11,layout:P.struct([P.u32("instruction"),eQ("lamports"),ey("seed"),ep("programId")])},UpgradeNonceAccount:{index:12,layout:P.struct([P.u32("instruction")])}}),e2=function(){function e(){(0,y.A)(this,e)}return(0,k.A)(e,null,[{key:"createAccount",value:function(e){var t=eF(e1.Create,{lamports:e.lamports,space:e.space,programId:X(e.programId.toBuffer())});return new eE({keys:[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:t})}},{key:"transfer",value:function(e){if("basePubkey"in e){var t,r;t=eF(e1.TransferWithSeed,{lamports:BigInt(e.lamports),seed:e.seed,programId:X(e.programId.toBuffer())}),r=[{pubkey:e.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}else t=eF(e1.Transfer,{lamports:BigInt(e.lamports)}),r=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}];return new eE({keys:r,programId:this.programId,data:t})}},{key:"assign",value:function(e){if("basePubkey"in e){var t,r;t=eF(e1.AssignWithSeed,{base:X(e.basePubkey.toBuffer()),seed:e.seed,programId:X(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else t=eF(e1.Assign,{programId:X(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}];return new eE({keys:r,programId:this.programId,data:t})}},{key:"createAccountWithSeed",value:function(e){var t=eF(e1.CreateWithSeed,{base:X(e.basePubkey.toBuffer()),seed:e.seed,lamports:e.lamports,space:e.space,programId:X(e.programId.toBuffer())}),r=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!1,isWritable:!0}];return e.basePubkey.equals(e.fromPubkey)||r.push({pubkey:e.basePubkey,isSigner:!0,isWritable:!1}),new eE({keys:r,programId:this.programId,data:t})}},{key:"createNonceAccount",value:function(t){var r=new eB;"basePubkey"in t&&"seed"in t?r.add(e.createAccountWithSeed({fromPubkey:t.fromPubkey,newAccountPubkey:t.noncePubkey,basePubkey:t.basePubkey,seed:t.seed,lamports:t.lamports,space:eZ,programId:this.programId})):r.add(e.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.noncePubkey,lamports:t.lamports,space:eZ,programId:this.programId}));var n={noncePubkey:t.noncePubkey,authorizedPubkey:t.authorizedPubkey};return r.add(this.nonceInitialize(n)),r}},{key:"nonceInitialize",value:function(e){var t=eF(e1.InitializeNonceAccount,{authorized:X(e.authorizedPubkey.toBuffer())});return new eE({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:eN,isSigner:!1,isWritable:!1},{pubkey:eL,isSigner:!1,isWritable:!1}],programId:this.programId,data:t})}},{key:"nonceAdvance",value:function(e){var t=eF(e1.AdvanceNonceAccount);return new eE({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:eN,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:t})}},{key:"nonceWithdraw",value:function(e){var t=eF(e1.WithdrawNonceAccount,{lamports:e.lamports});return new eE({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0},{pubkey:eN,isSigner:!1,isWritable:!1},{pubkey:eL,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:t})}},{key:"nonceAuthorize",value:function(e){var t=eF(e1.AuthorizeNonceAccount,{authorized:X(e.newAuthorizedPubkey.toBuffer())});return new eE({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:t})}},{key:"allocate",value:function(e){if("basePubkey"in e){var t,r;t=eF(e1.AllocateWithSeed,{base:X(e.basePubkey.toBuffer()),seed:e.seed,space:e.space,programId:X(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else t=eF(e1.Allocate,{space:e.space}),r=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}];return new eE({keys:r,programId:this.programId,data:t})}}]),e}();e2.programId=new en("11111111111111111111111111111111");var e3=es-300,e8=function(){var e;function t(){(0,y.A)(this,t)}return(0,k.A)(t,null,[{key:"getMinNumSignatures",value:function(e){return 2*(Math.ceil(e/t.chunkSize)+1+1)}},{key:"load",value:(e=(0,h.A)(b().mark(function e(r,n,i,a,s){var o,u,c,l,h,d,p,f,y,k,g,v,w,S,A,x,I,_,E;return b().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.getMinimumBalanceForRentExemption(s.length);case 2:return o=e.sent,e.next=5,r.getAccountInfo(i.publicKey,"confirmed");case 5:if(u=e.sent,c=null,!(null!==u)){e.next=16;break}if(!u.executable){e.next=11;break}return console.error("Program load failed, account is already executable"),e.abrupt("return",!1);case 11:u.data.length!==s.length&&(c=c||new eB).add(e2.allocate({accountPubkey:i.publicKey,space:s.length})),u.owner.equals(a)||(c=c||new eB).add(e2.assign({accountPubkey:i.publicKey,programId:a})),u.lamports<o&&(c=c||new eB).add(e2.transfer({fromPubkey:n.publicKey,toPubkey:i.publicKey,lamports:o-u.lamports})),e.next=17;break;case 16:c=new eB().add(e2.createAccount({fromPubkey:n.publicKey,newAccountPubkey:i.publicKey,lamports:o>0?o:1,space:s.length,programId:a}));case 17:if(!(null!==c)){e.next=20;break}return e.next=20,eV(r,c,[n,i],{commitment:"confirmed"});case 20:l=P.struct([P.u32("instruction"),P.u32("offset"),P.u32("bytesLength"),P.u32("bytesLengthPadding"),P.seq(P.u8("byte"),P.offset(P.u32(),-8),"bytes")]),h=t.chunkSize,d=0,p=s,f=[];case 25:if(!(p.length>0)){e.next=39;break}if(y=p.slice(0,h),k=m.Buffer.alloc(h+16),l.encode({instruction:0,offset:d,bytes:y,bytesLength:0,bytesLengthPadding:0},k),g=new eB().add({keys:[{pubkey:i.publicKey,isSigner:!0,isWritable:!0}],programId:a,data:k}),f.push(eV(r,g,[n,i],{commitment:"confirmed"})),!r._rpcEndpoint.includes("solana.com")){e.next=35;break}return e.next=35,eH(250);case 35:d+=h,p=p.slice(h),e.next=25;break;case 39:return e.next=41,Promise.all(f);case 41:return v=P.struct([P.u32("instruction")]),w=m.Buffer.alloc(v.span),v.encode({instruction:1},w),S=new eB().add({keys:[{pubkey:i.publicKey,isSigner:!0,isWritable:!0},{pubkey:eL,isSigner:!1,isWritable:!1}],programId:a,data:w}),A="processed",e.next=48,r.sendTransaction(S,[n,i],{preflightCommitment:A});case 48:return x=e.sent,e.next=51,r.confirmTransaction({signature:x,lastValidBlockHeight:S.lastValidBlockHeight,blockhash:S.recentBlockhash},A);case 51:if(_=(I=e.sent).context,!(E=I.value).err){e.next=56;break}throw Error("Transaction ".concat(x," failed (").concat(JSON.stringify(E),")"));case 56:return e.prev=57,e.next=60,r.getSlot({commitment:A});case 60:if(!(e.sent>_.slot)){e.next=63;break}return e.abrupt("break",71);case 63:e.next=67;break;case 65:e.prev=65,e.t0=e.catch(57);case 67:return e.next=69,new Promise(function(e){return setTimeout(e,Math.round(200))});case 69:e.next=56;break;case 71:return e.abrupt("return",!0);case 72:case"end":return e.stop()}},e,null,[[57,65]])})),function(t,r,n,i,a){return e.apply(this,arguments)})}]),t}();e8.chunkSize=e3;var e4=new en("BPFLoader2111111111111111111111111111111111"),e6=function(){function e(){(0,y.A)(this,e)}return(0,k.A)(e,null,[{key:"getMinNumSignatures",value:function(e){return e8.getMinNumSignatures(e)}},{key:"load",value:function(e,t,r,n,i){return e8.load(e,t,r,i,n)}}]),e}(),e5=function(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}(function(){if(i)return n;i=1;var e=Object.prototype.toString,t=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};return n=function(r){var n=function r(n,i){var a,s,o,u,c,l,h;if(!0===n)return"true";if(!1===n)return"false";switch(typeof n){case"object":if(null===n)return null;if(n.toJSON&&"function"==typeof n.toJSON)return r(n.toJSON(),i);if("[object Array]"===(h=e.call(n))){for(a=0,o="[",s=n.length-1;a<s;a++)o+=r(n[a],!0)+",";return s>-1&&(o+=r(n[a],!0)),o+"]"}if("[object Object]"!==h)return JSON.stringify(n);for(s=(u=t(n).sort()).length,o="",a=0;a<s;)void 0!==(l=r(n[c=u[a]],!1))&&(o&&(o+=","),o+=JSON.stringify(c)+":"+l),a++;return"{"+o+"}";case"function":case"undefined":return i?null:void 0;case"string":return JSON.stringify(n);default:return isFinite(n)?n:null}}(r,!1);if(void 0!==n)return""+n}}());function e7(e){for(var t=0;e>1;)e/=2,t++;return t}var e9=function(){function e(t,r,n,i,a){(0,y.A)(this,e),this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=t,this.leaderScheduleSlotOffset=r,this.warmup=n,this.firstNormalEpoch=i,this.firstNormalSlot=a}return(0,k.A)(e,[{key:"getEpoch",value:function(e){return this.getEpochAndSlotIndex(e)[0]}},{key:"getEpochAndSlotIndex",value:function(e){if(e<this.firstNormalSlot){var t,r=e7(0===(t=e+32+1)?1:(t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,(t|=t>>32)+1))-e7(32)-1,n=this.getSlotsInEpoch(r);return[r,e-(n-32)]}var i=e-this.firstNormalSlot,a=Math.floor(i/this.slotsPerEpoch);return[this.firstNormalEpoch+a,i%this.slotsPerEpoch]}},{key:"getFirstSlotInEpoch",value:function(e){return e<=this.firstNormalEpoch?(Math.pow(2,e)-1)*32:(e-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}},{key:"getLastSlotInEpoch",value:function(e){return this.getFirstSlotInEpoch(e)+this.getSlotsInEpoch(e)-1}},{key:"getSlotsInEpoch",value:function(e){return e<this.firstNormalEpoch?Math.pow(2,e+e7(32)):this.slotsPerEpoch}}]),e}(),te=globalThis.fetch,tt=function(e){(0,d.A)(r,e);var t=U(r);function r(e,n,i){var a;return(0,y.A)(this,r),(a=t.call(this,function(e){var t=(0,O.kb)(e,Y({autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3},n));return"socket"in t?a.underlyingSocket=t.socket:a.underlyingSocket=t,t},e,n,i)).underlyingSocket=void 0,a}return(0,k.A)(r,[{key:"call",value:function(){for(var e,t,n=null===(e=this.underlyingSocket)||void 0===e?void 0:e.readyState,i=arguments.length,a=Array(i),o=0;o<i;o++)a[o]=arguments[o];return 1===n?(t=(0,s.A)((0,f.A)(r.prototype),"call",this)).call.apply(t,[this].concat(a)):Promise.reject(Error("Tried to call a JSON-RPC method `"+a[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+n+")"))}},{key:"notify",value:function(){for(var e,t,n=null===(e=this.underlyingSocket)||void 0===e?void 0:e.readyState,i=arguments.length,a=Array(i),o=0;o<i;o++)a[o]=arguments[o];return 1===n?(t=(0,s.A)((0,f.A)(r.prototype),"notify",this)).call.apply(t,[this].concat(a)):Promise.reject(Error("Tried to send a JSON-RPC notification `"+a[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+n+")"))}}]),r}(O.vE),tr=function(){function e(t){(0,y.A)(this,e),this.key=void 0,this.state=void 0,this.key=t.key,this.state=t.state}return(0,k.A)(e,[{key:"isActive",value:function(){var e=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===e}}],[{key:"deserialize",value:function(e){var t=function(e,t){var r;try{r=e.layout.decode(t)}catch(e){throw Error("invalid instruction; "+e)}if(r.typeIndex!==e.index)throw Error("invalid account data; account type mismatch ".concat(r.typeIndex," != ").concat(e.index));return r}(tn,e),r=e.length-56;eb(r>=0,"lookup table is invalid"),eb(r%32==0,"lookup table is invalid");var n=P.struct([P.seq(ep(),r/32,"addresses")]).decode(e.slice(56)).addresses;return{deactivationSlot:t.deactivationSlot,lastExtendedSlot:t.lastExtendedSlot,lastExtendedSlotStartIndex:t.lastExtendedStartIndex,authority:0!==t.authority.length?new en(t.authority[0]):void 0,addresses:n.map(function(e){return new en(e)})}}}]),e}(),tn={index:1,layout:P.struct([P.u32("typeIndex"),eQ("deactivationSlot"),P.nu64("lastExtendedSlot"),P.u8("lastExtendedStartIndex"),P.u8(),P.seq(ep(),P.offset(P.u8(),-1),"authority")])},ti=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i,ta=(0,B.au)((0,B.KJ)(en),(0,B.Yj)(),function(e){return new en(e)}),ts=(0,B.PV)([(0,B.Yj)(),(0,B.eu)("base64")]),to=(0,B.au)((0,B.KJ)(m.Buffer),ts,function(e){return m.Buffer.from(e[0],"base64")}),tu=3e4;function tc(e){if("string"==typeof e)t=e;else if(e){var t,r,n=e.commitment,i=(0,a.A)(e,N);t=n,r=i}return{commitment:t,config:r}}function tl(e){return e.map(function(e){var t;return"memcmp"in e?Y(Y({},e),{},{memcmp:Y(Y({},e.memcmp),{},{encoding:null!==(t=e.memcmp.encoding)&&void 0!==t?t:"base58"})}):e})}function th(e){return(0,B.KC)([(0,B.NW)({jsonrpc:(0,B.eu)("2.0"),id:(0,B.Yj)(),result:e}),(0,B.NW)({jsonrpc:(0,B.eu)("2.0"),id:(0,B.Yj)(),error:(0,B.NW)({code:(0,B.L5)(),message:(0,B.Yj)(),data:(0,B.lq)((0,B.bz)())})})])}var td=th((0,B.L5)());function tp(e){return(0,B.au)(th(e),td,function(t){return"error"in t?t:Y(Y({},t),{},{result:(0,B.vt)(t.result,e)})})}function tf(e){return tp((0,B.NW)({context:(0,B.NW)({slot:(0,B.ai)()}),value:e}))}function ty(e){return(0,B.NW)({context:(0,B.NW)({slot:(0,B.ai)()}),value:e})}function tk(e,t){return 0===e?new ex({header:t.header,staticAccountKeys:t.accountKeys.map(function(e){return new en(e)}),recentBlockhash:t.recentBlockhash,compiledInstructions:t.instructions.map(function(e){return{programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:x().decode(e.data)}}),addressTableLookups:t.addressTableLookups}):new eA(t)}var tg=(0,B.NW)({foundation:(0,B.ai)(),foundationTerm:(0,B.ai)(),initial:(0,B.ai)(),taper:(0,B.ai)(),terminal:(0,B.ai)()}),tb=tp((0,B.YO)((0,B.me)((0,B.NW)({epoch:(0,B.ai)(),effectiveSlot:(0,B.ai)(),amount:(0,B.ai)(),postBalance:(0,B.ai)(),commission:(0,B.lq)((0,B.me)((0,B.ai)()))})))),tm=(0,B.YO)((0,B.NW)({slot:(0,B.ai)(),prioritizationFee:(0,B.ai)()})),tv=(0,B.NW)({total:(0,B.ai)(),validator:(0,B.ai)(),foundation:(0,B.ai)(),epoch:(0,B.ai)()}),tw=(0,B.NW)({epoch:(0,B.ai)(),slotIndex:(0,B.ai)(),slotsInEpoch:(0,B.ai)(),absoluteSlot:(0,B.ai)(),blockHeight:(0,B.lq)((0,B.ai)()),transactionCount:(0,B.lq)((0,B.ai)())}),tS=(0,B.NW)({slotsPerEpoch:(0,B.ai)(),leaderScheduleSlotOffset:(0,B.ai)(),warmup:(0,B.zM)(),firstNormalEpoch:(0,B.ai)(),firstNormalSlot:(0,B.ai)()}),tA=(0,B.g1)((0,B.Yj)(),(0,B.YO)((0,B.ai)())),tx=(0,B.me)((0,B.KC)([(0,B.NW)({}),(0,B.Yj)()])),tI=(0,B.NW)({err:tx}),t_=(0,B.eu)("receivedSignature"),tP=(0,B.NW)({"solana-core":(0,B.Yj)(),"feature-set":(0,B.lq)((0,B.ai)())}),tE=(0,B.NW)({program:(0,B.Yj)(),programId:ta,parsed:(0,B.L5)()}),tB=(0,B.NW)({programId:ta,accounts:(0,B.YO)(ta),data:(0,B.Yj)()}),tT=tf((0,B.NW)({err:(0,B.me)((0,B.KC)([(0,B.NW)({}),(0,B.Yj)()])),logs:(0,B.me)((0,B.YO)((0,B.Yj)())),accounts:(0,B.lq)((0,B.me)((0,B.YO)((0,B.me)((0,B.NW)({executable:(0,B.zM)(),owner:(0,B.Yj)(),lamports:(0,B.ai)(),data:(0,B.YO)((0,B.Yj)()),rentEpoch:(0,B.lq)((0,B.ai)())}))))),unitsConsumed:(0,B.lq)((0,B.ai)()),returnData:(0,B.lq)((0,B.me)((0,B.NW)({programId:(0,B.Yj)(),data:(0,B.PV)([(0,B.Yj)(),(0,B.eu)("base64")])}))),innerInstructions:(0,B.lq)((0,B.me)((0,B.YO)((0,B.NW)({index:(0,B.ai)(),instructions:(0,B.YO)((0,B.KC)([tE,tB]))}))))})),tW=tf((0,B.NW)({byIdentity:(0,B.g1)((0,B.Yj)(),(0,B.YO)((0,B.ai)())),range:(0,B.NW)({firstSlot:(0,B.ai)(),lastSlot:(0,B.ai)()})})),tO=tp(tg),tR=tp(tv),tC=tp(tm),tN=tp(tw),tL=tp(tS),tK=tp(tA),tz=tp((0,B.ai)()),tq=tf((0,B.NW)({total:(0,B.ai)(),circulating:(0,B.ai)(),nonCirculating:(0,B.ai)(),nonCirculatingAccounts:(0,B.YO)(ta)})),tY=(0,B.NW)({amount:(0,B.Yj)(),uiAmount:(0,B.me)((0,B.ai)()),decimals:(0,B.ai)(),uiAmountString:(0,B.lq)((0,B.Yj)())}),tj=tf((0,B.YO)((0,B.NW)({address:ta,amount:(0,B.Yj)(),uiAmount:(0,B.me)((0,B.ai)()),decimals:(0,B.ai)(),uiAmountString:(0,B.lq)((0,B.Yj)())}))),tM=tf((0,B.YO)((0,B.NW)({pubkey:ta,account:(0,B.NW)({executable:(0,B.zM)(),owner:ta,lamports:(0,B.ai)(),data:to,rentEpoch:(0,B.ai)()})}))),tU=(0,B.NW)({program:(0,B.Yj)(),parsed:(0,B.L5)(),space:(0,B.ai)()}),tV=tf((0,B.YO)((0,B.NW)({pubkey:ta,account:(0,B.NW)({executable:(0,B.zM)(),owner:ta,lamports:(0,B.ai)(),data:tU,rentEpoch:(0,B.ai)()})}))),tD=tf((0,B.YO)((0,B.NW)({lamports:(0,B.ai)(),address:ta}))),tH=(0,B.NW)({executable:(0,B.zM)(),owner:ta,lamports:(0,B.ai)(),data:to,rentEpoch:(0,B.ai)()}),tF=(0,B.NW)({pubkey:ta,account:tH}),tJ=(0,B.au)((0,B.KC)([(0,B.KJ)(m.Buffer),tU]),(0,B.KC)([ts,tU]),function(e){return Array.isArray(e)?(0,B.vt)(e,to):e}),tG=(0,B.NW)({executable:(0,B.zM)(),owner:ta,lamports:(0,B.ai)(),data:tJ,rentEpoch:(0,B.ai)()}),tX=(0,B.NW)({pubkey:ta,account:tG}),tZ=(0,B.NW)({state:(0,B.KC)([(0,B.eu)("active"),(0,B.eu)("inactive"),(0,B.eu)("activating"),(0,B.eu)("deactivating")]),active:(0,B.ai)(),inactive:(0,B.ai)()}),t$=tp((0,B.YO)((0,B.NW)({signature:(0,B.Yj)(),slot:(0,B.ai)(),err:tx,memo:(0,B.me)((0,B.Yj)()),blockTime:(0,B.lq)((0,B.me)((0,B.ai)()))}))),tQ=tp((0,B.YO)((0,B.NW)({signature:(0,B.Yj)(),slot:(0,B.ai)(),err:tx,memo:(0,B.me)((0,B.Yj)()),blockTime:(0,B.lq)((0,B.me)((0,B.ai)()))}))),t0=(0,B.NW)({subscription:(0,B.ai)(),result:ty(tH)}),t1=(0,B.NW)({pubkey:ta,account:tH}),t2=(0,B.NW)({subscription:(0,B.ai)(),result:ty(t1)}),t3=(0,B.NW)({parent:(0,B.ai)(),slot:(0,B.ai)(),root:(0,B.ai)()}),t8=(0,B.NW)({subscription:(0,B.ai)(),result:t3}),t4=(0,B.KC)([(0,B.NW)({type:(0,B.KC)([(0,B.eu)("firstShredReceived"),(0,B.eu)("completed"),(0,B.eu)("optimisticConfirmation"),(0,B.eu)("root")]),slot:(0,B.ai)(),timestamp:(0,B.ai)()}),(0,B.NW)({type:(0,B.eu)("createdBank"),parent:(0,B.ai)(),slot:(0,B.ai)(),timestamp:(0,B.ai)()}),(0,B.NW)({type:(0,B.eu)("frozen"),slot:(0,B.ai)(),timestamp:(0,B.ai)(),stats:(0,B.NW)({numTransactionEntries:(0,B.ai)(),numSuccessfulTransactions:(0,B.ai)(),numFailedTransactions:(0,B.ai)(),maxTransactionsPerEntry:(0,B.ai)()})}),(0,B.NW)({type:(0,B.eu)("dead"),slot:(0,B.ai)(),timestamp:(0,B.ai)(),err:(0,B.Yj)()})]),t6=(0,B.NW)({subscription:(0,B.ai)(),result:t4}),t5=(0,B.NW)({subscription:(0,B.ai)(),result:ty((0,B.KC)([tI,t_]))}),t7=(0,B.NW)({subscription:(0,B.ai)(),result:(0,B.ai)()}),t9=(0,B.NW)({pubkey:(0,B.Yj)(),gossip:(0,B.me)((0,B.Yj)()),tpu:(0,B.me)((0,B.Yj)()),rpc:(0,B.me)((0,B.Yj)()),version:(0,B.me)((0,B.Yj)())}),re=(0,B.NW)({votePubkey:(0,B.Yj)(),nodePubkey:(0,B.Yj)(),activatedStake:(0,B.ai)(),epochVoteAccount:(0,B.zM)(),epochCredits:(0,B.YO)((0,B.PV)([(0,B.ai)(),(0,B.ai)(),(0,B.ai)()])),commission:(0,B.ai)(),lastVote:(0,B.ai)(),rootSlot:(0,B.me)((0,B.ai)())}),rt=tp((0,B.NW)({current:(0,B.YO)(re),delinquent:(0,B.YO)(re)})),rr=(0,B.KC)([(0,B.eu)("processed"),(0,B.eu)("confirmed"),(0,B.eu)("finalized")]),rn=(0,B.NW)({slot:(0,B.ai)(),confirmations:(0,B.me)((0,B.ai)()),err:tx,confirmationStatus:(0,B.lq)(rr)}),ri=tf((0,B.YO)((0,B.me)(rn))),ra=tp((0,B.ai)()),rs=(0,B.NW)({accountKey:ta,writableIndexes:(0,B.YO)((0,B.ai)()),readonlyIndexes:(0,B.YO)((0,B.ai)())}),ro=(0,B.NW)({signatures:(0,B.YO)((0,B.Yj)()),message:(0,B.NW)({accountKeys:(0,B.YO)((0,B.Yj)()),header:(0,B.NW)({numRequiredSignatures:(0,B.ai)(),numReadonlySignedAccounts:(0,B.ai)(),numReadonlyUnsignedAccounts:(0,B.ai)()}),instructions:(0,B.YO)((0,B.NW)({accounts:(0,B.YO)((0,B.ai)()),data:(0,B.Yj)(),programIdIndex:(0,B.ai)()})),recentBlockhash:(0,B.Yj)(),addressTableLookups:(0,B.lq)((0,B.YO)(rs))})}),ru=(0,B.NW)({pubkey:ta,signer:(0,B.zM)(),writable:(0,B.zM)(),source:(0,B.lq)((0,B.KC)([(0,B.eu)("transaction"),(0,B.eu)("lookupTable")]))}),rc=(0,B.NW)({accountKeys:(0,B.YO)(ru),signatures:(0,B.YO)((0,B.Yj)())}),rl=(0,B.NW)({parsed:(0,B.L5)(),program:(0,B.Yj)(),programId:ta}),rh=(0,B.NW)({accounts:(0,B.YO)(ta),data:(0,B.Yj)(),programId:ta}),rd=(0,B.KC)([rh,rl]),rp=(0,B.KC)([(0,B.NW)({parsed:(0,B.L5)(),program:(0,B.Yj)(),programId:(0,B.Yj)()}),(0,B.NW)({accounts:(0,B.YO)((0,B.Yj)()),data:(0,B.Yj)(),programId:(0,B.Yj)()})]),rf=(0,B.au)(rd,rp,function(e){return"accounts"in e?(0,B.vt)(e,rh):(0,B.vt)(e,rl)}),ry=(0,B.NW)({signatures:(0,B.YO)((0,B.Yj)()),message:(0,B.NW)({accountKeys:(0,B.YO)(ru),instructions:(0,B.YO)(rf),recentBlockhash:(0,B.Yj)(),addressTableLookups:(0,B.lq)((0,B.me)((0,B.YO)(rs)))})}),rk=(0,B.NW)({accountIndex:(0,B.ai)(),mint:(0,B.Yj)(),owner:(0,B.lq)((0,B.Yj)()),programId:(0,B.lq)((0,B.Yj)()),uiTokenAmount:tY}),rg=(0,B.NW)({writable:(0,B.YO)(ta),readonly:(0,B.YO)(ta)}),rb=(0,B.NW)({err:tx,fee:(0,B.ai)(),innerInstructions:(0,B.lq)((0,B.me)((0,B.YO)((0,B.NW)({index:(0,B.ai)(),instructions:(0,B.YO)((0,B.NW)({accounts:(0,B.YO)((0,B.ai)()),data:(0,B.Yj)(),programIdIndex:(0,B.ai)()}))})))),preBalances:(0,B.YO)((0,B.ai)()),postBalances:(0,B.YO)((0,B.ai)()),logMessages:(0,B.lq)((0,B.me)((0,B.YO)((0,B.Yj)()))),preTokenBalances:(0,B.lq)((0,B.me)((0,B.YO)(rk))),postTokenBalances:(0,B.lq)((0,B.me)((0,B.YO)(rk))),loadedAddresses:(0,B.lq)(rg),computeUnitsConsumed:(0,B.lq)((0,B.ai)())}),rm=(0,B.NW)({err:tx,fee:(0,B.ai)(),innerInstructions:(0,B.lq)((0,B.me)((0,B.YO)((0,B.NW)({index:(0,B.ai)(),instructions:(0,B.YO)(rf)})))),preBalances:(0,B.YO)((0,B.ai)()),postBalances:(0,B.YO)((0,B.ai)()),logMessages:(0,B.lq)((0,B.me)((0,B.YO)((0,B.Yj)()))),preTokenBalances:(0,B.lq)((0,B.me)((0,B.YO)(rk))),postTokenBalances:(0,B.lq)((0,B.me)((0,B.YO)(rk))),loadedAddresses:(0,B.lq)(rg),computeUnitsConsumed:(0,B.lq)((0,B.ai)())}),rv=(0,B.KC)([(0,B.eu)(0),(0,B.eu)("legacy")]),rw=(0,B.NW)({pubkey:(0,B.Yj)(),lamports:(0,B.ai)(),postBalance:(0,B.me)((0,B.ai)()),rewardType:(0,B.me)((0,B.Yj)()),commission:(0,B.lq)((0,B.me)((0,B.ai)()))}),rS=tp((0,B.me)((0,B.NW)({blockhash:(0,B.Yj)(),previousBlockhash:(0,B.Yj)(),parentSlot:(0,B.ai)(),transactions:(0,B.YO)((0,B.NW)({transaction:ro,meta:(0,B.me)(rb),version:(0,B.lq)(rv)})),rewards:(0,B.lq)((0,B.YO)(rw)),blockTime:(0,B.me)((0,B.ai)()),blockHeight:(0,B.me)((0,B.ai)())}))),rA=tp((0,B.me)((0,B.NW)({blockhash:(0,B.Yj)(),previousBlockhash:(0,B.Yj)(),parentSlot:(0,B.ai)(),rewards:(0,B.lq)((0,B.YO)(rw)),blockTime:(0,B.me)((0,B.ai)()),blockHeight:(0,B.me)((0,B.ai)())}))),rx=tp((0,B.me)((0,B.NW)({blockhash:(0,B.Yj)(),previousBlockhash:(0,B.Yj)(),parentSlot:(0,B.ai)(),transactions:(0,B.YO)((0,B.NW)({transaction:rc,meta:(0,B.me)(rb),version:(0,B.lq)(rv)})),rewards:(0,B.lq)((0,B.YO)(rw)),blockTime:(0,B.me)((0,B.ai)()),blockHeight:(0,B.me)((0,B.ai)())}))),rI=tp((0,B.me)((0,B.NW)({blockhash:(0,B.Yj)(),previousBlockhash:(0,B.Yj)(),parentSlot:(0,B.ai)(),transactions:(0,B.YO)((0,B.NW)({transaction:ry,meta:(0,B.me)(rm),version:(0,B.lq)(rv)})),rewards:(0,B.lq)((0,B.YO)(rw)),blockTime:(0,B.me)((0,B.ai)()),blockHeight:(0,B.me)((0,B.ai)())}))),r_=tp((0,B.me)((0,B.NW)({blockhash:(0,B.Yj)(),previousBlockhash:(0,B.Yj)(),parentSlot:(0,B.ai)(),transactions:(0,B.YO)((0,B.NW)({transaction:rc,meta:(0,B.me)(rm),version:(0,B.lq)(rv)})),rewards:(0,B.lq)((0,B.YO)(rw)),blockTime:(0,B.me)((0,B.ai)()),blockHeight:(0,B.me)((0,B.ai)())}))),rP=tp((0,B.me)((0,B.NW)({blockhash:(0,B.Yj)(),previousBlockhash:(0,B.Yj)(),parentSlot:(0,B.ai)(),rewards:(0,B.lq)((0,B.YO)(rw)),blockTime:(0,B.me)((0,B.ai)()),blockHeight:(0,B.me)((0,B.ai)())}))),rE=tp((0,B.me)((0,B.NW)({blockhash:(0,B.Yj)(),previousBlockhash:(0,B.Yj)(),parentSlot:(0,B.ai)(),transactions:(0,B.YO)((0,B.NW)({transaction:ro,meta:(0,B.me)(rb)})),rewards:(0,B.lq)((0,B.YO)(rw)),blockTime:(0,B.me)((0,B.ai)())}))),rB=tp((0,B.me)((0,B.NW)({blockhash:(0,B.Yj)(),previousBlockhash:(0,B.Yj)(),parentSlot:(0,B.ai)(),signatures:(0,B.YO)((0,B.Yj)()),blockTime:(0,B.me)((0,B.ai)())}))),rT=tp((0,B.me)((0,B.NW)({slot:(0,B.ai)(),meta:(0,B.me)(rb),blockTime:(0,B.lq)((0,B.me)((0,B.ai)())),transaction:ro,version:(0,B.lq)(rv)}))),rW=tp((0,B.me)((0,B.NW)({slot:(0,B.ai)(),transaction:ry,meta:(0,B.me)(rm),blockTime:(0,B.lq)((0,B.me)((0,B.ai)())),version:(0,B.lq)(rv)}))),rO=tf((0,B.NW)({blockhash:(0,B.Yj)(),lastValidBlockHeight:(0,B.ai)()})),rR=tf((0,B.zM)()),rC=(0,B.NW)({slot:(0,B.ai)(),numTransactions:(0,B.ai)(),numSlots:(0,B.ai)(),samplePeriodSecs:(0,B.ai)()}),rN=tp((0,B.YO)(rC)),rL=tf((0,B.me)((0,B.NW)({feeCalculator:(0,B.NW)({lamportsPerSignature:(0,B.ai)()})}))),rK=tp((0,B.Yj)()),rz=tp((0,B.Yj)()),rq=(0,B.NW)({err:tx,logs:(0,B.YO)((0,B.Yj)()),signature:(0,B.Yj)()}),rY=(0,B.NW)({result:ty(rq),subscription:(0,B.ai)()}),rj={"solana-client":"js/".concat("1.0.0-maintenance")},rM=function(){var e,t,r,n,i,s,o,l,d,p,f,g,v,w,S,A,I,_,P,E,T,O,R,C,N,q,j,M,U,V,D,H,F,J,G,Z,$,Q,ee,et,er,en,ei,ea,es,eo,eu,ed,ep,ef,ey,ek,eg,em,ev,ew,eS,ex,eI,eP,eE,eT,eW,eO,eR,eC,eN,eL,eK,ez,eq,eY,eM,eV,eD,eF,eJ,eG,eX,eZ,eQ,e0,e1,e2,e3,e8,e4,e6,e7;function tn(e,t){var r,n,i,a,s,o,l,d,p,f,k,g,m,v,w,S,A,x,I,_,P=this;(0,y.A)(this,tn),this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,this.getBlockHeight=(k={},g=(0,h.A)(b().mark(function e(t){var r,n,i,a,s,o;return b().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=(n=tc(t)).commitment,a=n.config,k[o=e5(s=P._buildArgs([],i,void 0,a))]=null!==(r=k[o])&&void 0!==r?r:(0,h.A)(b().mark(function e(){var t,r;return b().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P._rpcRequest("getBlockHeight",s);case 3:if(t=e.sent,!("error"in(r=(0,B.vt)(t,tp((0,B.ai)()))))){e.next=7;break}throw new eU(r.error,"failed to get block height information");case 7:return e.abrupt("return",r.result);case 8:return e.prev=8,delete k[o],e.finish(8);case 11:case"end":return e.stop()}},e,null,[[0,,8,11]])}))(),e.next=6,k[o];case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e)})),function(e){return g.apply(this,arguments)}),t&&"string"==typeof t?this._commitment=t:t&&(this._commitment=t.commitment,this._confirmTransactionInitialTimeout=t.confirmTransactionInitialTimeout,w=t.wsEndpoint,S=t.httpHeaders,A=t.fetch,x=t.fetchMiddleware,I=t.disableRetryOnRateLimit,_=t.httpAgent),this._rpcEndpoint=function(e){if(!1===/^https?:/.test(e))throw TypeError("Endpoint URL must start with `http:` or `https:`.");return e}(e),this._rpcWsEndpoint=w||function(e){var t=e.match(ti);if(null==t)throw TypeError("Failed to validate endpoint URL `".concat(e,"`"));var r=(0,u.A)(t,4),n=(r[0],r[1]),i=r[2],a=r[3],s=e.startsWith("https:")?"wss:":"ws:",o=null==i?null:parseInt(i.slice(1),10);return"".concat(s,"//").concat(n).concat(null==o?"":":".concat(o+1)).concat(a)}(e),this._rpcClient=(r=S,n=A,i=x,a=I,s=_,f=n||te,null!=s&&console.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment.It has been ignored; `httpAgent` is only used in Node environments."),i&&(o=(0,h.A)(b().mark(function e(t,r){var n;return b().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise(function(e,n){try{i(t,r,function(t,r){return e([t,r])})}catch(e){n(e)}});case 2:return n=e.sent,e.next=5,f.apply(void 0,(0,c.A)(n));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e)})),p=function(e,t){return o.apply(this,arguments)}),new(W())((l=(0,h.A)(b().mark(function t(n,i){var s,o,u,c,l;return b().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:s={method:"POST",body:n,agent:d,headers:Object.assign({"Content-Type":"application/json"},r||{},rj)},t.prev=1,o=5,c=500;case 4:if(!p){t.next=10;break}return t.next=7,p(e,s);case 7:u=t.sent,t.next=13;break;case 10:return t.next=12,f(e,s);case 12:u=t.sent;case 13:if(!(429!==u.status)){t.next=15;break}return t.abrupt("break",26);case 15:if(!0!==a){t.next=17;break}return t.abrupt("break",26);case 17:if(0!=(o-=1)){t.next=20;break}return t.abrupt("break",26);case 20:return console.error("Server responded with ".concat(u.status," ").concat(u.statusText,".  Retrying after ").concat(c,"ms delay...")),t.next=23,eH(c);case 23:c*=2;case 24:t.next=4;break;case 26:return t.next=28,u.text();case 28:l=t.sent,u.ok?i(null,l):i(Error("".concat(u.status," ").concat(u.statusText,": ").concat(l))),t.next=35;break;case 32:t.prev=32,t.t0=t.catch(1),t.t0 instanceof Error&&i(t.t0);case 35:case"end":return t.stop()}},t,null,[[1,32]])})),function(e,t){return l.apply(this,arguments)}),{})),this._rpcRequest=(m=this._rpcClient,function(e,t){return new Promise(function(r,n){m.request(e,t,function(e,t){if(e){n(e);return}r(t)})})}),this._rpcBatchRequest=(v=this._rpcClient,function(e){return new Promise(function(t,r){0===e.length&&t([]);var n=e.map(function(e){return v.request(e.methodName,e.args)});v.request(n,function(e,n){if(e){r(e);return}t(n)})})}),this._rpcWebSocket=new tt(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}return(0,k.A)(tn,[{key:"commitment",get:function(){return this._commitment}},{key:"rpcEndpoint",get:function(){return this._rpcEndpoint}},{key:"getBalanceAndContext",value:(e=(0,h.A)(b().mark(function e(t,r){var n,i,a,s,o,u;return b().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=(n=tc(r)).commitment,a=n.config,s=this._buildArgs([t.toBase58()],i,void 0,a),e.next=4,this._rpcRequest("getBalance",s);case 4:if(o=e.sent,!("error"in(u=(0,B.vt)(o,tf((0,B.ai)()))))){e.next=8;break}throw new eU(u.error,"failed to get balance for ".concat(t.toBase58()));case 8:return e.abrupt("return",u.result);case 9:case"end":return e.stop()}},e,this)})),function(t,r){return e.apply(this,arguments)})},{key:"getBalance",value:(t=(0,h.A)(b().mark(function e(t,r){return b().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getBalanceAndContext(t,r).then(function(e){return e.value}).catch(function(e){throw Error("failed to get balance of account "+t.toBase58()+": "+e)});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),function(e,r){return t.apply(this,arguments)})},{key:"getBlockTime",value:(r=(0,h.A)(b().mark(function e(t){var r,n;return b().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._rpcRequest("getBlockTime",[t]);case 2:if(r=e.sent,!("error"in(n=(0,B.vt)(r,tp((0,B.me)((0,B.ai)())))))){e.next=6;break}throw new eU(n.error,"failed to get block time for slot ".concat(t));case 6:return e.abrupt("return",n.result);case 7:case"end":return e.stop()}},e,this)})),function(e){return r.apply(this,arguments)})},{key:"getMinimumLedgerSlot",value:(n=(0,h.A)(b().mark(function e(){var t,r;return b().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._rpcRequest("minimumLedgerSlot",[]);case 2:if(t=e.sent,!("error"in(r=(0,B.vt)(t,tp((0,B.ai)()))))){e.next=6;break}throw new eU(r.error,"failed to get minimum ledger slot");case 6:return e.abrupt("return",r.result);case 7:case"end":return e.stop()}},e,this)})),function(){return n.apply(this,arguments)})},{key:"getFirstAvailableBlock",value:(i=(0,h.A)(b().mark(function e(){var t,r;return b().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._rpcRequest("getFirstAvailableBlock",[]);case 2:if(t=e.sent,!("error"in(r=(0,B.vt)(t,tz)))){e.next=6;break}throw new eU(r.error,"failed to get first available block");case 6:return e.abrupt("return",r.result);case 7:case"end":return e.stop()}},e,this)})),function(){return i.apply(this,arguments)})},{key:"getSupply",value:(s=(0,h.A)(b().mark(function e(t){var r,n,i;return b().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={},r="string"==typeof t?{commitment:t}:t?Y(Y({},t),{},{commitment:t&&t.commitment||this.commitment}):{commitment:this.commitment},e.next=4,this._rpcRequest("getSupply",[r]);case 4:if(n=e.sent,!("error"in(i=(0,B.vt)(n,tq)))){e.next=8;break}throw new eU(i.error,"failed to get supply");case 8:return e.abrupt("return",i.result);case 9:case"end":return e.stop()}},e,this)})),function(e){return s.apply(this,arguments)})},{key:"getTokenSupply",value:(o=(0,h.A)(b().mark(function e(t,r){var n,i,a;return b().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=this._buildArgs([t.toBase58()],r),e.next=3,this._rpcRequest("getTokenSupply",n);case 3:if(i=e.sent,!("error"in(a=(0,B.vt)(i,tf(tY))))){e.next=7;break}throw new eU(a.error,"failed to get token supply");case 7:return e.abrupt("return",a.result);case 8:case"end":return e.stop()}},e,this)})),function(e,t){return o.apply(this,arguments)})},{key:"getTokenAccountBalance",value:(l=(0,h.A)(b().mark(function e(t,r){var n,i,a;return b().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=this._buildArgs([t.toBase58()],r),e.next=3,this._rpcRequest("getTokenAccountBalance",n);case 3:if(i=e.sent,!("error"in(a=(0,B.vt)(i,tf(tY))))){e.next=7;break}throw new eU(a.error,"failed to get token account balance");case 7:return e.abrupt("return",a.result);case 8:case"end":return e.stop()}},e,this)})),function(e,t){return l.apply(this,arguments)})},{key:"getTokenAccountsByOwner",value:(d=(0,h.A)(b().mark(function e(t,r,n){var i,a,s,o,u,c,l;return b().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=(i=tc(n)).commitment,s=i.config,o=[t.toBase58()],"mint"in r?o.push({mint:r.mint.toBase58()}):o.push({programId:r.programId.toBase58()}),u=this._buildArgs(o,a,"base64",s),e.next=6,this._rpcRequest("getTokenAccountsByOwner",u);case 6:if(c=e.sent,!("error"in(l=(0,B.vt)(c,tM)))){e.next=10;break}throw new eU(l.error,"failed to get token accounts owned by account ".concat(t.toBase58()));case 10:return e.abrupt("return",l.result);case 11:case"end":return e.stop()}},e,this)})),function(e,t,r){return d.apply(this,arguments)})},{key:"getParsedTokenAccountsByOwner",value:(p=(0,h.A)(b().mark(function e(t,r,n){var i,a,s,o;return b().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=[t.toBase58()],"mint"in r?i.push({mint:r.mint.toBase58()}):i.push({programId:r.programId.toBase58()}),a=this._buildArgs(i,n,"jsonParsed"),e.next=5,this._rpcRequest("getTokenAccountsByOwner",a);case 5:if(s=e.sent,!("error"in(o=(0,B.vt)(s,tV)))){e.next=9;break}throw new eU(o.error,"failed to get token accounts owned by account ".concat(t.toBase58()));case 9:return e.abrupt("return",o.result);case 10:case"end":return e.stop()}},e,this)})),function(e,t,r){return p.apply(this,arguments)})},{key:"getLargestAccounts",value:(f=(0,h.A)(b().mark(function e(t){var r,n,i,a;return b().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=(r=Y(Y({},t),{},{commitment:t&&t.commitment||this.commitment})).filter||r.commitment?[r]:[],e.next=4,this._rpcRequest("getLargestAccounts",n);case 4:if(i=e.sent,!("error"in(a=(0,B.vt)(i,tD)))){e.next=8;break}throw new eU(a.error,"failed to get largest accounts");case 8:return e.abrupt("return",a.result);case 9:case"end":return e.stop()}},e,this)})),function(e){return f.apply(this,arguments)})},{key:"getTokenLargestAccounts",value:(g=(0,h.A)(b().mark(function e(t,r){var n,i,a;return b().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=this._buildArgs([t.toBase58()],r),e.next=3,this._rpcRequest("getTokenLargestAccounts",n);case 3:if(i=e.sent,!("error"in(a=(0,B.vt)(i,tj)))){e.next=7;break}throw new eU(a.error,"failed to get token largest accounts");case 7:return e.abrupt("return",a.result);case 8:case"end":return e.stop()}},e,this)})),function(e,t){return g.apply(this,arguments)})},{key:"getAccountInfoAndContext",value:(v=(0,h.A)(b().mark(function e(t,r){var n,i,a,s,o,u;return b().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=(n=tc(r)).commitment,a=n.config,s=this._buildArgs([t.toBase58()],i,"base64",a),e.next=4,this._rpcRequest("getAccountInfo",s);case 4:if(o=e.sent,!("error"in(u=(0,B.vt)(o,tf((0,B.me)(tH)))))){e.next=8;break}throw new eU(u.error,"failed to get info about account ".concat(t.toBase58()));case 8:return e.abrupt("return",u.result);case 9:case"end":return e.stop()}},e,this)})),function(e,t){return v.apply(this,arguments)})},{key:"getParsedAccountInfo",value:(w=(0,h.A)(b().mark(function e(t,r){var n,i,a,s,o,u;return b().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=(n=tc(r)).commitment,a=n.config,s=this._buildArgs([t.toBase58()],i,"jsonParsed",a),e.next=4,this._rpcRequest("getAccountInfo",s);case 4:if(o=e.sent,!("error"in(u=(0,B.vt)(o,tf((0,B.me)(tG)))))){e.next=8;break}throw new eU(u.error,"failed to get info about account ".concat(t.toBase58()));case 8:return e.abrupt("return",u.result);case 9:case"end":return e.stop()}},e,this)})),function(e,t){return w.apply(this,arguments)})},{key:"getAccountInfo",value:(S=(0,h.A)(b().mark(function e(t,r){var n;return b().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.getAccountInfoAndContext(t,r);case 3:return n=e.sent,e.abrupt("return",n.value);case 7:throw e.prev=7,e.t0=e.catch(0),Error("failed to get info about account "+t.toBase58()+": "+e.t0);case 10:case"end":return e.stop()}},e,this,[[0,7]])})),function(e,t){return S.apply(this,arguments)})},{key:"getMultipleParsedAccounts",value:(A=(0,h.A)(b().mark(function e(t,r){var n,i,a,s,o,u,c;return b().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=(n=tc(r)).commitment,a=n.config,s=t.map(function(e){return e.toBase58()}),o=this._buildArgs([s],i,"jsonParsed",a),e.next=5,this._rpcRequest("getMultipleAccounts",o);case 5:if(u=e.sent,!("error"in(c=(0,B.vt)(u,tf((0,B.YO)((0,B.me)(tG))))))){e.next=9;break}throw new eU(c.error,"failed to get info for accounts ".concat(s));case 9:return e.abrupt("return",c.result);case 10:case"end":return e.stop()}},e,this)})),function(e,t){return A.apply(this,arguments)})},{key:"getMultipleAccountsInfoAndContext",value:(I=(0,h.A)(b().mark(function e(t,r){var n,i,a,s,o,u,c;return b().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=(n=tc(r)).commitment,a=n.config,s=t.map(function(e){return e.toBase58()}),o=this._buildArgs([s],i,"base64",a),e.next=5,this._rpcRequest("getMultipleAccounts",o);case 5:if(u=e.sent,!("error"in(c=(0,B.vt)(u,tf((0,B.YO)((0,B.me)(tH))))))){e.next=9;break}throw new eU(c.error,"failed to get info for accounts ".concat(s));case 9:return e.abrupt("return",c.result);case 10:case"end":return e.stop()}},e,this)})),function(e,t){return I.apply(this,arguments)})},{key:"getMultipleAccountsInfo",value:(_=(0,h.A)(b().mark(function e(t,r){var n;return b().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMultipleAccountsInfoAndContext(t,r);case 2:return n=e.sent,e.abrupt("return",n.value);case 4:case"end":return e.stop()}},e,this)})),function(e,t){return _.apply(this,arguments)})},{key:"getStakeActivation",value:(P=(0,h.A)(b().mark(function e(t,r,n){var i,a,s,o,u,c;return b().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=(i=tc(r)).commitment,s=i.config,o=this._buildArgs([t.toBase58()],a,void 0,Y(Y({},s),{},{epoch:null!=n?n:null==s?void 0:s.epoch})),e.next=4,this._rpcRequest("getStakeActivation",o);case 4:if(u=e.sent,!("error"in(c=(0,B.vt)(u,tp(tZ))))){e.next=8;break}throw new eU(c.error,"failed to get Stake Activation ".concat(t.toBase58()));case 8:return e.abrupt("return",c.result);case 9:case"end":return e.stop()}},e,this)})),function(e,t,r){return P.apply(this,arguments)})},{key:"getProgramAccounts",value:(E=(0,h.A)(b().mark(function e(t,r){var n,i,s,o,u,c,l,h,d;return b().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=(n=tc(r)).commitment,o=(s=n.config||{}).encoding,u=(0,a.A)(s,L),c=this._buildArgs([t.toBase58()],i,o||"base64",Y(Y({},u),u.filters?{filters:tl(u.filters)}:null)),e.next=5,this._rpcRequest("getProgramAccounts",c);case 5:if(l=e.sent,h=(0,B.YO)(tF),!("error"in(d=!0===u.withContext?(0,B.vt)(l,tf(h)):(0,B.vt)(l,tp(h))))){e.next=10;break}throw new eU(d.error,"failed to get accounts owned by program ".concat(t.toBase58()));case 10:return e.abrupt("return",d.result);case 11:case"end":return e.stop()}},e,this)})),function(e,t){return E.apply(this,arguments)})},{key:"getParsedProgramAccounts",value:(T=(0,h.A)(b().mark(function e(t,r){var n,i,a,s,o,u;return b().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=(n=tc(r)).commitment,a=n.config,s=this._buildArgs([t.toBase58()],i,"jsonParsed",a),e.next=4,this._rpcRequest("getProgramAccounts",s);case 4:if(o=e.sent,!("error"in(u=(0,B.vt)(o,tp((0,B.YO)(tX)))))){e.next=8;break}throw new eU(u.error,"failed to get accounts owned by program ".concat(t.toBase58()));case 8:return e.abrupt("return",u.result);case 9:case"end":return e.stop()}},e,this)})),function(e,t){return T.apply(this,arguments)})},{key:"confirmTransaction",value:(O=(0,h.A)(b().mark(function e(t,r){var n,i,a,s;return b().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("string"!=typeof t){e.next=4;break}n=t,e.next=8;break;case 4:if(!(null!==(i=(a=t).abortSignal)&&void 0!==i&&i.aborted)){e.next=7;break}return e.abrupt("return",Promise.reject(a.abortSignal.reason));case 7:n=a.signature;case 8:e.prev=8,s=x().decode(n),e.next=15;break;case 12:throw e.prev=12,e.t0=e.catch(8),Error("signature must be base58 encoded: "+n);case 15:if(eb(64===s.length,"signature has invalid length"),"string"!=typeof t){e.next=22;break}return e.next=19,this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:r||this.commitment,signature:n});case 19:case 25:case 30:return e.abrupt("return",e.sent);case 22:if(!("lastValidBlockHeight"in t)){e.next=28;break}return e.next=25,this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:r||this.commitment,strategy:t});case 28:return e.next=30,this.confirmTransactionUsingDurableNonceStrategy({commitment:r||this.commitment,strategy:t});case 31:case"end":return e.stop()}},e,this,[[8,12]])})),function(e,t){return O.apply(this,arguments)})},{key:"getCancellationPromise",value:function(e){return new Promise(function(t,r){null!=e&&(e.aborted?r(e.reason):e.addEventListener("abort",function(){r(e.reason)}))})}},{key:"getTransactionConfirmationPromise",value:function(e){var t,r,n=this,i=e.commitment,a=e.signature,s=!1;return{abortConfirmation:function(){r&&(r(),r=void 0),null!=t&&(n.removeSignatureListener(t),t=void 0)},confirmationPromise:new Promise(function(e,o){try{t=n.onSignature(a,function(r,n){t=void 0,e({__type:e_.PROCESSED,response:{context:n,value:r}})},i);var u=new Promise(function(e){null==t?e():r=n._onSubscriptionStateChange(t,function(t){"subscribed"===t&&e()})});(0,h.A)(b().mark(function t(){var r,c,l;return b().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u;case 2:if(!s){t.next=4;break}return t.abrupt("return");case 4:return t.next=6,n.getSignatureStatus(a);case 6:if(r=t.sent,!s){t.next=9;break}return t.abrupt("return");case 9:if(null!=r){t.next=11;break}return t.abrupt("return");case 11:if(c=r.context,l=r.value,null!=l){t.next=14;break}return t.abrupt("return");case 14:if(!(null!=l&&l.err)){t.next=18;break}o(l.err),t.next=29;break;case 18:t.t0=i,t.next="confirmed"===t.t0?21:"single"===t.t0?21:"singleGossip"===t.t0?21:"finalized"===t.t0?24:"max"===t.t0?24:"root"===t.t0?24:("processed"===t.t0||t.t0,27);break;case 21:if("processed"!==l.confirmationStatus){t.next=23;break}return t.abrupt("return");case 23:case 26:return t.abrupt("break",27);case 24:if(!("processed"===l.confirmationStatus||"confirmed"===l.confirmationStatus)){t.next=26;break}return t.abrupt("return");case 27:s=!0,e({__type:e_.PROCESSED,response:{context:c,value:l}});case 29:case"end":return t.stop()}},t)}))()}catch(e){o(e)}})}}},{key:"confirmTransactionUsingBlockHeightExceedanceStrategy",value:(R=(0,h.A)(b().mark(function e(t){var r,n,i,a,s,o,u,c,l,d,p,f,y,k=this;return b().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.commitment,i=(n=t.strategy).abortSignal,a=n.lastValidBlockHeight,s=n.signature,o=!1,u=new Promise(function(e){var t=function(){var e=(0,h.A)(b().mark(function e(){var t;return b().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.getBlockHeight(r);case 3:return t=e.sent,e.abrupt("return",t);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",-1);case 10:case"end":return e.stop()}},e,null,[[0,7]])}));return function(){return e.apply(this,arguments)}}();(0,h.A)(b().mark(function r(){var n;return b().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t();case 2:if(n=r.sent,!o){r.next=5;break}return r.abrupt("return");case 5:if(!(n<=a)){r.next=17;break}return r.next=8,eH(1e3);case 8:if(!o){r.next=10;break}return r.abrupt("return");case 10:return r.next=12,t();case 12:if(n=r.sent,!o){r.next=15;break}return r.abrupt("return");case 15:r.next=5;break;case 17:e({__type:e_.BLOCKHEIGHT_EXCEEDED});case 18:case"end":return r.stop()}},r)}))()}),l=(c=this.getTransactionConfirmationPromise({commitment:r,signature:s})).abortConfirmation,d=c.confirmationPromise,p=this.getCancellationPromise(i),e.prev=5,e.next=8,Promise.race([p,d,u]);case 8:if((y=e.sent).__type!==e_.PROCESSED){e.next=13;break}f=y.response,e.next=14;break;case 13:throw new ec(s);case 14:return e.prev=14,o=!0,l(),e.finish(14);case 18:return e.abrupt("return",f);case 19:case"end":return e.stop()}},e,this,[[5,,14,18]])})),function(e){return R.apply(this,arguments)})},{key:"confirmTransactionUsingDurableNonceStrategy",value:(C=(0,h.A)(b().mark(function e(t){var r,n,i,a,s,o,u,c,l,d,p,f,y,k,g,m,v,w,S,A,x,I=this;return b().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.commitment,i=(n=t.strategy).abortSignal,a=n.minContextSlot,s=n.nonceAccountPubkey,o=n.nonceValue,u=n.signature,c=!1,l=new Promise(function(e){var t=o,n=null,i=function(){var e=(0,h.A)(b().mark(function e(){var i,o,u;return b().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I.getNonceAndContext(s,{commitment:r,minContextSlot:a});case 3:return o=(i=e.sent).context,u=i.value,n=o.slot,e.abrupt("return",null==u?void 0:u.nonce);case 10:return e.prev=10,e.t0=e.catch(0),e.abrupt("return",t);case 13:case"end":return e.stop()}},e,null,[[0,10]])}));return function(){return e.apply(this,arguments)}}();(0,h.A)(b().mark(function r(){return b().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,i();case 2:if(t=r.sent,!c){r.next=5;break}return r.abrupt("return");case 5:if(!(o!==t)){r.next=9;break}return e({__type:e_.NONCE_INVALID,slotInWhichNonceDidAdvance:n}),r.abrupt("return");case 9:return r.next=11,eH(2e3);case 11:if(!c){r.next=13;break}return r.abrupt("return");case 13:return r.next=15,i();case 15:if(t=r.sent,!c){r.next=18;break}return r.abrupt("return");case 18:r.next=5;break;case 20:case"end":return r.stop()}},r)}))()}),p=(d=this.getTransactionConfirmationPromise({commitment:r,signature:u})).abortConfirmation,f=d.confirmationPromise,y=this.getCancellationPromise(i),e.prev=5,e.next=8,Promise.race([y,f,l]);case 8:if((g=e.sent).__type!==e_.PROCESSED){e.next=13;break}k=g.response,e.next=47;break;case 13:return e.next=16,this.getSignatureStatus(u);case 16:if(null!=(S=e.sent)){e.next=19;break}return e.abrupt("break",27);case 19:if(!(S.context.slot<(null!==(w=g.slotInWhichNonceDidAdvance)&&void 0!==w?w:a))){e.next=23;break}return e.next=22,eH(400);case 22:return e.abrupt("continue",13);case 23:return v=S,e.abrupt("break",27);case 27:if(!(null!==(m=v)&&void 0!==m&&m.value)){e.next=46;break}A=r||"finalized",x=v.value.confirmationStatus,e.t0=A,e.next="processed"===e.t0?33:"recent"===e.t0?33:"confirmed"===e.t0?36:"single"===e.t0?36:"singleGossip"===e.t0?36:"finalized"===e.t0?39:"max"===e.t0?39:"root"===e.t0?39:42;break;case 33:if(!("processed"!==x&&"confirmed"!==x&&"finalized"!==x)){e.next=35;break}throw new eh(u);case 35:case 38:case 41:return e.abrupt("break",43);case 36:if(!("confirmed"!==x&&"finalized"!==x)){e.next=38;break}throw new eh(u);case 39:if(!("finalized"!==x)){e.next=41;break}throw new eh(u);case 42:case 43:k={context:v.context,value:{err:v.value.err}},e.next=47;break;case 46:throw new eh(u);case 47:return e.prev=47,c=!0,p(),e.finish(47);case 51:return e.abrupt("return",k);case 52:case"end":return e.stop()}},e,this,[[5,,47,51]])})),function(e){return C.apply(this,arguments)})},{key:"confirmTransactionUsingLegacyTimeoutStrategy",value:(N=(0,h.A)(b().mark(function e(t){var r,n,i,a,s,o,u,c,l,h=this;return b().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.commitment,n=t.signature,a=new Promise(function(e){var t=h._confirmTransactionInitialTimeout||6e4;switch(r){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":t=h._confirmTransactionInitialTimeout||3e4}i=setTimeout(function(){return e({__type:e_.TIMED_OUT,timeoutMs:t})},t)}),o=(s=this.getTransactionConfirmationPromise({commitment:r,signature:n})).abortConfirmation,u=s.confirmationPromise,e.prev=3,e.next=6,Promise.race([u,a]);case 6:if((l=e.sent).__type!==e_.PROCESSED){e.next=11;break}c=l.response,e.next=12;break;case 11:throw new el(n,l.timeoutMs/1e3);case 12:return e.prev=12,clearTimeout(i),o(),e.finish(12);case 16:return e.abrupt("return",c);case 17:case"end":return e.stop()}},e,this,[[3,,12,16]])})),function(e){return N.apply(this,arguments)})},{key:"getClusterNodes",value:(q=(0,h.A)(b().mark(function e(){var t,r;return b().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._rpcRequest("getClusterNodes",[]);case 2:if(t=e.sent,!("error"in(r=(0,B.vt)(t,tp((0,B.YO)(t9)))))){e.next=6;break}throw new eU(r.error,"failed to get cluster nodes");case 6:return e.abrupt("return",r.result);case 7:case"end":return e.stop()}},e,this)})),function(){return q.apply(this,arguments)})},{key:"getVoteAccounts",value:(j=(0,h.A)(b().mark(function e(t){var r,n,i;return b().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=this._buildArgs([],t),e.next=3,this._rpcRequest("getVoteAccounts",r);case 3:if(n=e.sent,!("error"in(i=(0,B.vt)(n,rt)))){e.next=7;break}throw new eU(i.error,"failed to get vote accounts");case 7:return e.abrupt("return",i.result);case 8:case"end":return e.stop()}},e,this)})),function(e){return j.apply(this,arguments)})},{key:"getSlot",value:(M=(0,h.A)(b().mark(function e(t){var r,n,i,a,s,o;return b().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=(r=tc(t)).commitment,i=r.config,a=this._buildArgs([],n,void 0,i),e.next=4,this._rpcRequest("getSlot",a);case 4:if(s=e.sent,!("error"in(o=(0,B.vt)(s,tp((0,B.ai)()))))){e.next=8;break}throw new eU(o.error,"failed to get slot");case 8:return e.abrupt("return",o.result);case 9:case"end":return e.stop()}},e,this)})),function(e){return M.apply(this,arguments)})},{key:"getSlotLeader",value:(U=(0,h.A)(b().mark(function e(t){var r,n,i,a,s,o;return b().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=(r=tc(t)).commitment,i=r.config,a=this._buildArgs([],n,void 0,i),e.next=4,this._rpcRequest("getSlotLeader",a);case 4:if(s=e.sent,!("error"in(o=(0,B.vt)(s,tp((0,B.Yj)()))))){e.next=8;break}throw new eU(o.error,"failed to get slot leader");case 8:return e.abrupt("return",o.result);case 9:case"end":return e.stop()}},e,this)})),function(e){return U.apply(this,arguments)})},{key:"getSlotLeaders",value:(V=(0,h.A)(b().mark(function e(t,r){var n,i,a;return b().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=[t,r],e.next=3,this._rpcRequest("getSlotLeaders",n);case 3:if(i=e.sent,!("error"in(a=(0,B.vt)(i,tp((0,B.YO)(ta)))))){e.next=7;break}throw new eU(a.error,"failed to get slot leaders");case 7:return e.abrupt("return",a.result);case 8:case"end":return e.stop()}},e,this)})),function(e,t){return V.apply(this,arguments)})},{key:"getSignatureStatus",value:(D=(0,h.A)(b().mark(function e(t,r){var n,i,a,s;return b().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getSignatureStatuses([t],r);case 2:return i=(n=e.sent).context,eb(1===(a=n.value).length),s=a[0],e.abrupt("return",{context:i,value:s});case 8:case"end":return e.stop()}},e,this)})),function(e,t){return D.apply(this,arguments)})},{key:"getSignatureStatuses",value:(H=(0,h.A)(b().mark(function e(t,r){var n,i,a;return b().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=[t],r&&n.push(r),e.next=4,this._rpcRequest("getSignatureStatuses",n);case 4:if(i=e.sent,!("error"in(a=(0,B.vt)(i,ri)))){e.next=8;break}throw new eU(a.error,"failed to get signature status");case 8:return e.abrupt("return",a.result);case 9:case"end":return e.stop()}},e,this)})),function(e,t){return H.apply(this,arguments)})},{key:"getTransactionCount",value:(F=(0,h.A)(b().mark(function e(t){var r,n,i,a,s,o;return b().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=(r=tc(t)).commitment,i=r.config,a=this._buildArgs([],n,void 0,i),e.next=4,this._rpcRequest("getTransactionCount",a);case 4:if(s=e.sent,!("error"in(o=(0,B.vt)(s,tp((0,B.ai)()))))){e.next=8;break}throw new eU(o.error,"failed to get transaction count");case 8:return e.abrupt("return",o.result);case 9:case"end":return e.stop()}},e,this)})),function(e){return F.apply(this,arguments)})},{key:"getTotalSupply",value:(J=(0,h.A)(b().mark(function e(t){var r;return b().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getSupply({commitment:t,excludeNonCirculatingAccountsList:!0});case 2:return r=e.sent,e.abrupt("return",r.value.total);case 4:case"end":return e.stop()}},e,this)})),function(e){return J.apply(this,arguments)})},{key:"getInflationGovernor",value:(G=(0,h.A)(b().mark(function e(t){var r,n,i;return b().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=this._buildArgs([],t),e.next=3,this._rpcRequest("getInflationGovernor",r);case 3:if(n=e.sent,!("error"in(i=(0,B.vt)(n,tO)))){e.next=7;break}throw new eU(i.error,"failed to get inflation");case 7:return e.abrupt("return",i.result);case 8:case"end":return e.stop()}},e,this)})),function(e){return G.apply(this,arguments)})},{key:"getInflationReward",value:(Z=(0,h.A)(b().mark(function e(t,r,n){var i,a,s,o,u,c;return b().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=(i=tc(n)).commitment,s=i.config,o=this._buildArgs([t.map(function(e){return e.toBase58()})],a,void 0,Y(Y({},s),{},{epoch:null!=r?r:null==s?void 0:s.epoch})),e.next=4,this._rpcRequest("getInflationReward",o);case 4:if(u=e.sent,!("error"in(c=(0,B.vt)(u,tb)))){e.next=8;break}throw new eU(c.error,"failed to get inflation reward");case 8:return e.abrupt("return",c.result);case 9:case"end":return e.stop()}},e,this)})),function(e,t,r){return Z.apply(this,arguments)})},{key:"getInflationRate",value:($=(0,h.A)(b().mark(function e(){var t,r;return b().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._rpcRequest("getInflationRate",[]);case 2:if(t=e.sent,!("error"in(r=(0,B.vt)(t,tR)))){e.next=6;break}throw new eU(r.error,"failed to get inflation rate");case 6:return e.abrupt("return",r.result);case 7:case"end":return e.stop()}},e,this)})),function(){return $.apply(this,arguments)})},{key:"getEpochInfo",value:(Q=(0,h.A)(b().mark(function e(t){var r,n,i,a,s,o;return b().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=(r=tc(t)).commitment,i=r.config,a=this._buildArgs([],n,void 0,i),e.next=4,this._rpcRequest("getEpochInfo",a);case 4:if(s=e.sent,!("error"in(o=(0,B.vt)(s,tN)))){e.next=8;break}throw new eU(o.error,"failed to get epoch info");case 8:return e.abrupt("return",o.result);case 9:case"end":return e.stop()}},e,this)})),function(e){return Q.apply(this,arguments)})},{key:"getEpochSchedule",value:(ee=(0,h.A)(b().mark(function e(){var t,r,n;return b().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._rpcRequest("getEpochSchedule",[]);case 2:if(t=e.sent,!("error"in(r=(0,B.vt)(t,tL)))){e.next=6;break}throw new eU(r.error,"failed to get epoch schedule");case 6:return n=r.result,e.abrupt("return",new e9(n.slotsPerEpoch,n.leaderScheduleSlotOffset,n.warmup,n.firstNormalEpoch,n.firstNormalSlot));case 8:case"end":return e.stop()}},e,this)})),function(){return ee.apply(this,arguments)})},{key:"getLeaderSchedule",value:(et=(0,h.A)(b().mark(function e(){var t,r;return b().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._rpcRequest("getLeaderSchedule",[]);case 2:if(t=e.sent,!("error"in(r=(0,B.vt)(t,tK)))){e.next=6;break}throw new eU(r.error,"failed to get leader schedule");case 6:return e.abrupt("return",r.result);case 7:case"end":return e.stop()}},e,this)})),function(){return et.apply(this,arguments)})},{key:"getMinimumBalanceForRentExemption",value:(er=(0,h.A)(b().mark(function e(t,r){var n,i,a;return b().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=this._buildArgs([t],r),e.next=3,this._rpcRequest("getMinimumBalanceForRentExemption",n);case 3:if(i=e.sent,!("error"in(a=(0,B.vt)(i,ra)))){e.next=8;break}return console.warn("Unable to fetch minimum balance for rent exemption"),e.abrupt("return",0);case 8:return e.abrupt("return",a.result);case 9:case"end":return e.stop()}},e,this)})),function(e,t){return er.apply(this,arguments)})},{key:"getRecentBlockhashAndContext",value:(en=(0,h.A)(b().mark(function e(t){var r,n,i,a;return b().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getLatestBlockhashAndContext(t);case 2:return n=(r=e.sent).context,i=r.value.blockhash,e.t0=function(){return{}},a={get lamportsPerSignature(){throw Error("The capability to fetch `lamportsPerSignature` using the `getRecentBlockhash` API is no longer offered by the network. Use the `getFeeForMessage` API to obtain the fee for a given message.")},toJSON:e.t0},e.abrupt("return",{context:n,value:{blockhash:i,feeCalculator:a}});case 8:case"end":return e.stop()}},e,this)})),function(e){return en.apply(this,arguments)})},{key:"getRecentPerformanceSamples",value:(ei=(0,h.A)(b().mark(function e(t){var r,n;return b().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._rpcRequest("getRecentPerformanceSamples",t?[t]:[]);case 2:if(r=e.sent,!("error"in(n=(0,B.vt)(r,rN)))){e.next=6;break}throw new eU(n.error,"failed to get recent performance samples");case 6:return e.abrupt("return",n.result);case 7:case"end":return e.stop()}},e,this)})),function(e){return ei.apply(this,arguments)})},{key:"getFeeCalculatorForBlockhash",value:(ea=(0,h.A)(b().mark(function e(t,r){var n,i,a,s,o,u;return b().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=this._buildArgs([t],r),e.next=3,this._rpcRequest("getFeeCalculatorForBlockhash",n);case 3:if(i=e.sent,!("error"in(a=(0,B.vt)(i,rL)))){e.next=7;break}throw new eU(a.error,"failed to get fee calculator");case 7:return o=(s=a.result).context,u=s.value,e.abrupt("return",{context:o,value:null!==u?u.feeCalculator:null});case 9:case"end":return e.stop()}},e,this)})),function(e,t){return ea.apply(this,arguments)})},{key:"getFeeForMessage",value:(es=(0,h.A)(b().mark(function e(t,r){var n,i,a,s;return b().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=X(t.serialize()).toString("base64"),i=this._buildArgs([n],r),e.next=4,this._rpcRequest("getFeeForMessage",i);case 4:if(a=e.sent,!("error"in(s=(0,B.vt)(a,tf((0,B.me)((0,B.ai)())))))){e.next=8;break}throw new eU(s.error,"failed to get fee for message");case 8:if(null!==s.result){e.next=10;break}throw Error("invalid blockhash");case 10:return e.abrupt("return",s.result);case 11:case"end":return e.stop()}},e,this)})),function(e,t){return es.apply(this,arguments)})},{key:"getRecentPrioritizationFees",value:(eo=(0,h.A)(b().mark(function e(t){var r,n,i,a,s;return b().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=null!=(n=null==t||null===(r=t.lockedWritableAccounts)||void 0===r?void 0:r.map(function(e){return e.toBase58()}))&&n.length?[n]:[],e.next=4,this._rpcRequest("getRecentPrioritizationFees",i);case 4:if(a=e.sent,!("error"in(s=(0,B.vt)(a,tC)))){e.next=8;break}throw new eU(s.error,"failed to get recent prioritization fees");case 8:return e.abrupt("return",s.result);case 9:case"end":return e.stop()}},e,this)})),function(e){return eo.apply(this,arguments)})},{key:"getRecentBlockhash",value:(eu=(0,h.A)(b().mark(function e(t){var r;return b().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.getRecentBlockhashAndContext(t);case 3:return r=e.sent,e.abrupt("return",r.value);case 7:throw e.prev=7,e.t0=e.catch(0),Error("failed to get recent blockhash: "+e.t0);case 10:case"end":return e.stop()}},e,this,[[0,7]])})),function(e){return eu.apply(this,arguments)})},{key:"getLatestBlockhash",value:(ed=(0,h.A)(b().mark(function e(t){var r;return b().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.getLatestBlockhashAndContext(t);case 3:return r=e.sent,e.abrupt("return",r.value);case 7:throw e.prev=7,e.t0=e.catch(0),Error("failed to get recent blockhash: "+e.t0);case 10:case"end":return e.stop()}},e,this,[[0,7]])})),function(e){return ed.apply(this,arguments)})},{key:"getLatestBlockhashAndContext",value:(ep=(0,h.A)(b().mark(function e(t){var r,n,i,a,s,o;return b().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=(r=tc(t)).commitment,i=r.config,a=this._buildArgs([],n,void 0,i),e.next=4,this._rpcRequest("getLatestBlockhash",a);case 4:if(s=e.sent,!("error"in(o=(0,B.vt)(s,rO)))){e.next=8;break}throw new eU(o.error,"failed to get latest blockhash");case 8:return e.abrupt("return",o.result);case 9:case"end":return e.stop()}},e,this)})),function(e){return ep.apply(this,arguments)})},{key:"isBlockhashValid",value:(ef=(0,h.A)(b().mark(function e(t,r){var n,i,a,s,o,u;return b().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=(n=tc(r)).commitment,a=n.config,s=this._buildArgs([t],i,void 0,a),e.next=4,this._rpcRequest("isBlockhashValid",s);case 4:if(o=e.sent,!("error"in(u=(0,B.vt)(o,rR)))){e.next=8;break}throw new eU(u.error,"failed to determine if the blockhash `"+t+"`is valid");case 8:return e.abrupt("return",u.result);case 9:case"end":return e.stop()}},e,this)})),function(e,t){return ef.apply(this,arguments)})},{key:"getVersion",value:(ey=(0,h.A)(b().mark(function e(){var t,r;return b().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._rpcRequest("getVersion",[]);case 2:if(t=e.sent,!("error"in(r=(0,B.vt)(t,tp(tP))))){e.next=6;break}throw new eU(r.error,"failed to get version");case 6:return e.abrupt("return",r.result);case 7:case"end":return e.stop()}},e,this)})),function(){return ey.apply(this,arguments)})},{key:"getGenesisHash",value:(ek=(0,h.A)(b().mark(function e(){var t,r;return b().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._rpcRequest("getGenesisHash",[]);case 2:if(t=e.sent,!("error"in(r=(0,B.vt)(t,tp((0,B.Yj)()))))){e.next=6;break}throw new eU(r.error,"failed to get genesis hash");case 6:return e.abrupt("return",r.result);case 7:case"end":return e.stop()}},e,this)})),function(){return ek.apply(this,arguments)})},{key:"getBlock",value:(eg=(0,h.A)(b().mark(function e(t,r){var n,i,a,s,o,u,c,l,h;return b().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=(n=tc(r)).commitment,a=n.config,s=this._buildArgsAtLeastConfirmed([t],i,void 0,a),e.next=4,this._rpcRequest("getBlock",s);case 4:o=e.sent,e.prev=5,e.t0=null==a?void 0:a.transactionDetails,e.next="accounts"===e.t0?9:"none"===e.t0?13:17;break;case 9:if(!("error"in(u=(0,B.vt)(o,rx)))){e.next=12;break}throw u.error;case 12:return e.abrupt("return",u.result);case 13:if(!("error"in(c=(0,B.vt)(o,rA)))){e.next=16;break}throw c.error;case 16:return e.abrupt("return",c.result);case 17:if(!("error"in(l=(0,B.vt)(o,rS)))){e.next=20;break}throw l.error;case 20:return h=l.result,e.abrupt("return",h?Y(Y({},h),{},{transactions:h.transactions.map(function(e){var t=e.transaction,r=e.meta,n=e.version;return{meta:r,transaction:Y(Y({},t),{},{message:tk(n,t.message)}),version:n}})}):null);case 22:e.next=27;break;case 24:throw e.prev=24,e.t1=e.catch(5),new eU(e.t1,"failed to get confirmed block");case 27:case"end":return e.stop()}},e,this,[[5,24]])})),function(e,t){return eg.apply(this,arguments)})},{key:"getParsedBlock",value:(em=(0,h.A)(b().mark(function e(t,r){var n,i,a,s,o,u,c,l;return b().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=(n=tc(r)).commitment,a=n.config,s=this._buildArgsAtLeastConfirmed([t],i,"jsonParsed",a),e.next=4,this._rpcRequest("getBlock",s);case 4:o=e.sent,e.prev=5,e.t0=null==a?void 0:a.transactionDetails,e.next="accounts"===e.t0?9:"none"===e.t0?13:17;break;case 9:if(!("error"in(u=(0,B.vt)(o,r_)))){e.next=12;break}throw u.error;case 12:return e.abrupt("return",u.result);case 13:if(!("error"in(c=(0,B.vt)(o,rP)))){e.next=16;break}throw c.error;case 16:return e.abrupt("return",c.result);case 17:if(!("error"in(l=(0,B.vt)(o,rI)))){e.next=20;break}throw l.error;case 20:return e.abrupt("return",l.result);case 21:e.next=26;break;case 23:throw e.prev=23,e.t1=e.catch(5),new eU(e.t1,"failed to get block");case 26:case"end":return e.stop()}},e,this,[[5,23]])})),function(e,t){return em.apply(this,arguments)})},{key:"getBlockProduction",value:(ev=(0,h.A)(b().mark(function e(t){var r,n,i,s,o,u,c;return b().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return"string"==typeof t?n=t:t&&(i=t.commitment,s=(0,a.A)(t,K),n=i,r=s),o=this._buildArgs([],n,"base64",r),e.next=4,this._rpcRequest("getBlockProduction",o);case 4:if(u=e.sent,!("error"in(c=(0,B.vt)(u,tW)))){e.next=8;break}throw new eU(c.error,"failed to get block production information");case 8:return e.abrupt("return",c.result);case 9:case"end":return e.stop()}},e,this)})),function(e){return ev.apply(this,arguments)})},{key:"getTransaction",value:(ew=(0,h.A)(b().mark(function e(t,r){var n,i,a,s,o,u,c;return b().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=(n=tc(r)).commitment,a=n.config,s=this._buildArgsAtLeastConfirmed([t],i,void 0,a),e.next=4,this._rpcRequest("getTransaction",s);case 4:if(o=e.sent,!("error"in(u=(0,B.vt)(o,rT)))){e.next=8;break}throw new eU(u.error,"failed to get transaction");case 8:if(c=u.result){e.next=11;break}return e.abrupt("return",c);case 11:return e.abrupt("return",Y(Y({},c),{},{transaction:Y(Y({},c.transaction),{},{message:tk(c.version,c.transaction.message)})}));case 12:case"end":return e.stop()}},e,this)})),function(e,t){return ew.apply(this,arguments)})},{key:"getParsedTransaction",value:(eS=(0,h.A)(b().mark(function e(t,r){var n,i,a,s,o,u;return b().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=(n=tc(r)).commitment,a=n.config,s=this._buildArgsAtLeastConfirmed([t],i,"jsonParsed",a),e.next=4,this._rpcRequest("getTransaction",s);case 4:if(o=e.sent,!("error"in(u=(0,B.vt)(o,rW)))){e.next=8;break}throw new eU(u.error,"failed to get transaction");case 8:return e.abrupt("return",u.result);case 9:case"end":return e.stop()}},e,this)})),function(e,t){return eS.apply(this,arguments)})},{key:"getParsedTransactions",value:(ex=(0,h.A)(b().mark(function e(t,r){var n,i,a,s,o,u=this;return b().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=(n=tc(r)).commitment,a=n.config,s=t.map(function(e){return{methodName:"getTransaction",args:u._buildArgsAtLeastConfirmed([e],i,"jsonParsed",a)}}),e.next=4,this._rpcBatchRequest(s);case 4:return o=e.sent.map(function(e){var t=(0,B.vt)(e,rW);if("error"in t)throw new eU(t.error,"failed to get transactions");return t.result}),e.abrupt("return",o);case 7:case"end":return e.stop()}},e,this)})),function(e,t){return ex.apply(this,arguments)})},{key:"getTransactions",value:(eI=(0,h.A)(b().mark(function e(t,r){var n,i,a,s,o,u=this;return b().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=(n=tc(r)).commitment,a=n.config,s=t.map(function(e){return{methodName:"getTransaction",args:u._buildArgsAtLeastConfirmed([e],i,void 0,a)}}),e.next=4,this._rpcBatchRequest(s);case 4:return o=e.sent.map(function(e){var t=(0,B.vt)(e,rT);if("error"in t)throw new eU(t.error,"failed to get transactions");var r=t.result;return r?Y(Y({},r),{},{transaction:Y(Y({},r.transaction),{},{message:tk(r.version,r.transaction.message)})}):r}),e.abrupt("return",o);case 7:case"end":return e.stop()}},e,this)})),function(e,t){return eI.apply(this,arguments)})},{key:"getConfirmedBlock",value:(eP=(0,h.A)(b().mark(function e(t,r){var n,i,a,s,o;return b().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=this._buildArgsAtLeastConfirmed([t],r),e.next=3,this._rpcRequest("getBlock",n);case 3:if(i=e.sent,!("error"in(a=(0,B.vt)(i,rE)))){e.next=7;break}throw new eU(a.error,"failed to get confirmed block");case 7:if(s=a.result){e.next=10;break}throw Error("Confirmed block "+t+" not found");case 10:return o=Y(Y({},s),{},{transactions:s.transactions.map(function(e){var t=e.transaction,r=e.meta,n=new eA(t.message);return{meta:r,transaction:Y(Y({},t),{},{message:n})}})}),e.abrupt("return",Y(Y({},o),{},{transactions:o.transactions.map(function(e){var t=e.transaction;return{meta:e.meta,transaction:eB.populate(t.message,t.signatures)}})}));case 12:case"end":return e.stop()}},e,this)})),function(e,t){return eP.apply(this,arguments)})},{key:"getBlocks",value:(eE=(0,h.A)(b().mark(function e(t,r,n){var i,a,s;return b().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=this._buildArgsAtLeastConfirmed(void 0!==r?[t,r]:[t],n),e.next=3,this._rpcRequest("getBlocks",i);case 3:if(a=e.sent,!("error"in(s=(0,B.vt)(a,tp((0,B.YO)((0,B.ai)())))))){e.next=7;break}throw new eU(s.error,"failed to get blocks");case 7:return e.abrupt("return",s.result);case 8:case"end":return e.stop()}},e,this)})),function(e,t,r){return eE.apply(this,arguments)})},{key:"getBlockSignatures",value:(eT=(0,h.A)(b().mark(function e(t,r){var n,i,a,s;return b().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=this._buildArgsAtLeastConfirmed([t],r,void 0,{transactionDetails:"signatures",rewards:!1}),e.next=3,this._rpcRequest("getBlock",n);case 3:if(i=e.sent,!("error"in(a=(0,B.vt)(i,rB)))){e.next=7;break}throw new eU(a.error,"failed to get block");case 7:if(s=a.result){e.next=10;break}throw Error("Block "+t+" not found");case 10:return e.abrupt("return",s);case 11:case"end":return e.stop()}},e,this)})),function(e,t){return eT.apply(this,arguments)})},{key:"getConfirmedBlockSignatures",value:(eW=(0,h.A)(b().mark(function e(t,r){var n,i,a,s;return b().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=this._buildArgsAtLeastConfirmed([t],r,void 0,{transactionDetails:"signatures",rewards:!1}),e.next=3,this._rpcRequest("getBlock",n);case 3:if(i=e.sent,!("error"in(a=(0,B.vt)(i,rB)))){e.next=7;break}throw new eU(a.error,"failed to get confirmed block");case 7:if(s=a.result){e.next=10;break}throw Error("Confirmed block "+t+" not found");case 10:return e.abrupt("return",s);case 11:case"end":return e.stop()}},e,this)})),function(e,t){return eW.apply(this,arguments)})},{key:"getConfirmedTransaction",value:(eO=(0,h.A)(b().mark(function e(t,r){var n,i,a,s,o,u;return b().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=this._buildArgsAtLeastConfirmed([t],r),e.next=3,this._rpcRequest("getTransaction",n);case 3:if(i=e.sent,!("error"in(a=(0,B.vt)(i,rT)))){e.next=7;break}throw new eU(a.error,"failed to get transaction");case 7:if(s=a.result){e.next=10;break}return e.abrupt("return",s);case 10:return o=new eA(s.transaction.message),u=s.transaction.signatures,e.abrupt("return",Y(Y({},s),{},{transaction:eB.populate(o,u)}));case 13:case"end":return e.stop()}},e,this)})),function(e,t){return eO.apply(this,arguments)})},{key:"getParsedConfirmedTransaction",value:(eR=(0,h.A)(b().mark(function e(t,r){var n,i,a;return b().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=this._buildArgsAtLeastConfirmed([t],r,"jsonParsed"),e.next=3,this._rpcRequest("getTransaction",n);case 3:if(i=e.sent,!("error"in(a=(0,B.vt)(i,rW)))){e.next=7;break}throw new eU(a.error,"failed to get confirmed transaction");case 7:return e.abrupt("return",a.result);case 8:case"end":return e.stop()}},e,this)})),function(e,t){return eR.apply(this,arguments)})},{key:"getParsedConfirmedTransactions",value:(eC=(0,h.A)(b().mark(function e(t,r){var n,i,a=this;return b().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.map(function(e){return{methodName:"getTransaction",args:a._buildArgsAtLeastConfirmed([e],r,"jsonParsed")}}),e.next=3,this._rpcBatchRequest(n);case 3:return i=e.sent.map(function(e){var t=(0,B.vt)(e,rW);if("error"in t)throw new eU(t.error,"failed to get confirmed transactions");return t.result}),e.abrupt("return",i);case 6:case"end":return e.stop()}},e,this)})),function(e,t){return eC.apply(this,arguments)})},{key:"getConfirmedSignaturesForAddress",value:(eN=(0,h.A)(b().mark(function e(t,r,n){var i,a,s,o,u,c;return b().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i={},e.next=3,this.getFirstAvailableBlock();case 3:a=e.sent;case 4:if("until"in i){e.next=24;break}if(!(--r<=0||r<a)){e.next=8;break}return e.abrupt("break",24);case 8:return e.prev=8,e.next=11,this.getConfirmedBlockSignatures(r,"finalized");case 11:(s=e.sent).signatures.length>0&&(i.until=s.signatures[s.signatures.length-1].toString()),e.next=22;break;case 15:if(e.prev=15,e.t0=e.catch(8),!(e.t0 instanceof Error&&e.t0.message.includes("skipped"))){e.next=21;break}return e.abrupt("continue",4);case 21:throw e.t0;case 22:e.next=4;break;case 24:return e.next=26,this.getSlot("finalized");case 26:o=e.sent;case 27:if("before"in i){e.next=47;break}if(!(++n>o)){e.next=31;break}return e.abrupt("break",47);case 31:return e.prev=31,e.next=34,this.getConfirmedBlockSignatures(n);case 34:(u=e.sent).signatures.length>0&&(i.before=u.signatures[u.signatures.length-1].toString()),e.next=45;break;case 38:if(e.prev=38,e.t1=e.catch(31),!(e.t1 instanceof Error&&e.t1.message.includes("skipped"))){e.next=44;break}return e.abrupt("continue",27);case 44:throw e.t1;case 45:e.next=27;break;case 47:return e.next=49,this.getConfirmedSignaturesForAddress2(t,i);case 49:return c=e.sent,e.abrupt("return",c.map(function(e){return e.signature}));case 51:case"end":return e.stop()}},e,this,[[8,15],[31,38]])})),function(e,t,r){return eN.apply(this,arguments)})},{key:"getConfirmedSignaturesForAddress2",value:(eL=(0,h.A)(b().mark(function e(t,r,n){var i,a,s;return b().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=this._buildArgsAtLeastConfirmed([t.toBase58()],n,void 0,r),e.next=3,this._rpcRequest("getConfirmedSignaturesForAddress2",i);case 3:if(a=e.sent,!("error"in(s=(0,B.vt)(a,t$)))){e.next=7;break}throw new eU(s.error,"failed to get confirmed signatures for address");case 7:return e.abrupt("return",s.result);case 8:case"end":return e.stop()}},e,this)})),function(e,t,r){return eL.apply(this,arguments)})},{key:"getSignaturesForAddress",value:(eK=(0,h.A)(b().mark(function e(t,r,n){var i,a,s;return b().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=this._buildArgsAtLeastConfirmed([t.toBase58()],n,void 0,r),e.next=3,this._rpcRequest("getSignaturesForAddress",i);case 3:if(a=e.sent,!("error"in(s=(0,B.vt)(a,tQ)))){e.next=7;break}throw new eU(s.error,"failed to get signatures for address");case 7:return e.abrupt("return",s.result);case 8:case"end":return e.stop()}},e,this)})),function(e,t,r){return eK.apply(this,arguments)})},{key:"getAddressLookupTable",value:(ez=(0,h.A)(b().mark(function e(t,r){var n,i,a,s;return b().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getAccountInfoAndContext(t,r);case 2:return i=(n=e.sent).context,a=n.value,s=null,null!==a&&(s=new tr({key:t,state:tr.deserialize(a.data)})),e.abrupt("return",{context:i,value:s});case 8:case"end":return e.stop()}},e,this)})),function(e,t){return ez.apply(this,arguments)})},{key:"getNonceAndContext",value:(eq=(0,h.A)(b().mark(function e(t,r){var n,i,a,s;return b().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getAccountInfoAndContext(t,r);case 2:return i=(n=e.sent).context,a=n.value,s=null,null!==a&&(s=e$.fromAccountData(a.data)),e.abrupt("return",{context:i,value:s});case 8:case"end":return e.stop()}},e,this)})),function(e,t){return eq.apply(this,arguments)})},{key:"getNonce",value:(eY=(0,h.A)(b().mark(function e(t,r){return b().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getNonceAndContext(t,r).then(function(e){return e.value}).catch(function(e){throw Error("failed to get nonce for account "+t.toBase58()+": "+e)});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),function(e,t){return eY.apply(this,arguments)})},{key:"requestAirdrop",value:(eM=(0,h.A)(b().mark(function e(t,r){var n,i;return b().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._rpcRequest("requestAirdrop",[t.toBase58(),r]);case 2:if(n=e.sent,!("error"in(i=(0,B.vt)(n,rK)))){e.next=6;break}throw new eU(i.error,"airdrop to ".concat(t.toBase58()," failed"));case 6:return e.abrupt("return",i.result);case 7:case"end":return e.stop()}},e,this)})),function(e,t){return eM.apply(this,arguments)})},{key:"_blockhashWithExpiryBlockHeight",value:(eV=(0,h.A)(b().mark(function e(t){var r;return b().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=10;break}case 1:if(!this._pollingBlockhash){e.next=6;break}return e.next=4,eH(100);case 4:e.next=1;break;case 6:if(r=Date.now()-this._blockhashInfo.lastFetch>=tu,!(null!==this._blockhashInfo.latestBlockhash&&!r)){e.next=10;break}return e.abrupt("return",this._blockhashInfo.latestBlockhash);case 10:return e.next=12,this._pollNewBlockhash();case 12:return e.abrupt("return",e.sent);case 13:case"end":return e.stop()}},e,this)})),function(e){return eV.apply(this,arguments)})},{key:"_pollNewBlockhash",value:(eD=(0,h.A)(b().mark(function e(){var t,r,n,i,a;return b().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this._pollingBlockhash=!0,e.prev=1,t=Date.now(),n=(r=this._blockhashInfo.latestBlockhash)?r.blockhash:null,i=0;case 6:if(!(i<50)){e.next=18;break}return e.next=9,this.getLatestBlockhash("finalized");case 9:if(a=e.sent,!(n!==a.blockhash)){e.next=13;break}return this._blockhashInfo={latestBlockhash:a,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},e.abrupt("return",a);case 13:return e.next=15,eH(200);case 15:i++,e.next=6;break;case 18:throw Error("Unable to obtain a new blockhash after ".concat(Date.now()-t,"ms"));case 19:return e.prev=19,this._pollingBlockhash=!1,e.finish(19);case 22:case"end":return e.stop()}},e,this,[[1,,19,22]])})),function(){return eD.apply(this,arguments)})},{key:"getStakeMinimumDelegation",value:(eF=(0,h.A)(b().mark(function e(t){var r,n,i,a,s,o;return b().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=(r=tc(t)).commitment,i=r.config,a=this._buildArgs([],n,"base64",i),e.next=4,this._rpcRequest("getStakeMinimumDelegation",a);case 4:if(s=e.sent,!("error"in(o=(0,B.vt)(s,tf((0,B.ai)()))))){e.next=8;break}throw new eU(o.error,"failed to get stake minimum delegation");case 8:return e.abrupt("return",o.result);case 9:case"end":return e.stop()}},e,this)})),function(e){return eF.apply(this,arguments)})},{key:"simulateTransaction",value:(eJ=(0,h.A)(b().mark(function e(t,r,n){var i,a,s,o,u,l,h,d,p,f,y,k,g,v,w,S,A,x,I,_,P,E,T,W,O;return b().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!("message"in t)){e.next=18;break}if(i=t.serialize(),a=m.Buffer.from(i).toString("base64"),!(Array.isArray(r)||void 0!==n)){e.next=6;break}throw Error("Invalid arguments");case 6:return(s=r||{}).encoding="base64","commitment"in s||(s.commitment=this.commitment),r&&"object"==typeof r&&"innerInstructions"in r&&(s.innerInstructions=r.innerInstructions),o=[a,s],e.next=13,this._rpcRequest("simulateTransaction",o);case 13:if(u=e.sent,!("error"in(l=(0,B.vt)(u,tT)))){e.next=17;break}throw Error("failed to simulate transaction: "+l.error.message);case 17:return e.abrupt("return",l.result);case 18:if(t instanceof eB?(d=t,(h=new eB).feePayer=d.feePayer,h.instructions=t.instructions,h.nonceInfo=d.nonceInfo,h.signatures=d.signatures):(h=eB.populate(t))._message=h._json=void 0,!(void 0!==r&&!Array.isArray(r))){e.next=21;break}throw Error("Invalid arguments");case 21:if(p=r,!(h.nonceInfo&&p)){e.next=26;break}(f=h).sign.apply(f,(0,c.A)(p)),e.next=46;break;case 26:y=this._disableBlockhashCaching;case 27:return e.next=29,this._blockhashWithExpiryBlockHeight(y);case 29:if(g=e.sent,h.lastValidBlockHeight=g.lastValidBlockHeight,h.recentBlockhash=g.blockhash,p){e.next=34;break}return e.abrupt("break",46);case 34:if((k=h).sign.apply(k,(0,c.A)(p)),h.signature){e.next=37;break}throw Error("!signature");case 37:if(v=h.signature.toString("base64"),!(!this._blockhashInfo.simulatedSignatures.includes(v)&&!this._blockhashInfo.transactionSignatures.includes(v))){e.next=43;break}return this._blockhashInfo.simulatedSignatures.push(v),e.abrupt("break",46);case 43:y=!0;case 44:e.next=27;break;case 46:return S=(w=h._compile()).serialize(),A=h._serialize(S).toString("base64"),x={encoding:"base64",commitment:this.commitment},n&&(I=(Array.isArray(n)?n:w.nonProgramIds()).map(function(e){return e.toBase58()}),x.accounts={encoding:"base64",addresses:I}),p&&(x.sigVerify=!0),r&&"object"==typeof r&&"innerInstructions"in r&&(x.innerInstructions=r.innerInstructions),_=[A,x],e.next=57,this._rpcRequest("simulateTransaction",_);case 57:if(P=e.sent,!("error"in(E=(0,B.vt)(P,tT)))){e.next=62;break}throw"data"in E.error&&(T=E.error.data.logs)&&Array.isArray(T)&&(O=(W="\n    ")+T.join(W),console.error(E.error.message,O)),new ej({action:"simulate",signature:"",transactionMessage:E.error.message,logs:T});case 62:return e.abrupt("return",E.result);case 63:case"end":return e.stop()}},e,this)})),function(e,t,r){return eJ.apply(this,arguments)})},{key:"sendTransaction",value:(eG=(0,h.A)(b().mark(function e(t,r,n){var i,a,s,o,u,l;return b().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!("version"in t)){e.next=7;break}if(!(r&&Array.isArray(r))){e.next=3;break}throw Error("Invalid arguments");case 3:return i=t.serialize(),e.next=6,this.sendRawTransaction(i,r);case 6:return e.abrupt("return",e.sent);case 7:if(!(void 0===r||!Array.isArray(r))){e.next=9;break}throw Error("Invalid arguments");case 9:if(a=r,!t.nonceInfo){e.next=14;break}t.sign.apply(t,(0,c.A)(a)),e.next=32;break;case 14:s=this._disableBlockhashCaching;case 15:return e.next=17,this._blockhashWithExpiryBlockHeight(s);case 17:if(o=e.sent,t.lastValidBlockHeight=o.lastValidBlockHeight,t.recentBlockhash=o.blockhash,t.sign.apply(t,(0,c.A)(a)),t.signature){e.next=23;break}throw Error("!signature");case 23:if(u=t.signature.toString("base64"),this._blockhashInfo.transactionSignatures.includes(u)){e.next=29;break}return this._blockhashInfo.transactionSignatures.push(u),e.abrupt("break",32);case 29:s=!0;case 30:e.next=15;break;case 32:return l=t.serialize(),e.next=35,this.sendRawTransaction(l,n);case 35:return e.abrupt("return",e.sent);case 36:case"end":return e.stop()}},e,this)})),function(e,t,r){return eG.apply(this,arguments)})},{key:"sendRawTransaction",value:(eX=(0,h.A)(b().mark(function e(t,r){var n,i;return b().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=X(t).toString("base64"),e.next=3,this.sendEncodedTransaction(n,r);case 3:return i=e.sent,e.abrupt("return",i);case 5:case"end":return e.stop()}},e,this)})),function(e,t){return eX.apply(this,arguments)})},{key:"sendEncodedTransaction",value:(eZ=(0,h.A)(b().mark(function e(t,r){var n,i,a,s,o,u,c;return b().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n={encoding:"base64"},a=!0===(i=r&&r.skipPreflight)?"processed":r&&r.preflightCommitment||this.commitment,r&&null!=r.maxRetries&&(n.maxRetries=r.maxRetries),r&&null!=r.minContextSlot&&(n.minContextSlot=r.minContextSlot),i&&(n.skipPreflight=i),a&&(n.preflightCommitment=a),s=[t,n],e.next=10,this._rpcRequest("sendTransaction",s);case 10:if(o=e.sent,!("error"in(u=(0,B.vt)(o,rz)))){e.next=16;break}throw c=void 0,"data"in u.error&&(c=u.error.data.logs),new ej({action:i?"send":"simulate",signature:"",transactionMessage:u.error.message,logs:c});case 16:return e.abrupt("return",u.result);case 17:case"end":return e.stop()}},e,this)})),function(e,t){return eZ.apply(this,arguments)})},{key:"_wsOnOpen",value:function(){var e=this;this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval(function(){(0,h.A)(b().mark(function t(){return b().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e._rpcWebSocket.notify("ping");case 3:t.next=7;break;case 5:t.prev=5,t.t0=t.catch(0);case 7:case"end":return t.stop()}},t,null,[[0,5]])}))()},5e3),this._updateSubscriptions()}},{key:"_wsOnError",value:function(e){this._rpcWebSocketConnected=!1,console.error("ws error:",e.message)}},{key:"_wsOnClose",value:function(e){var t=this;if(this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),1e3===e){this._updateSubscriptions();return}this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach(function(e){var r=(0,u.A)(e,2),n=r[0],i=r[1];t._setSubscription(n,Y(Y({},i),{},{state:"pending"}))})}},{key:"_setSubscription",value:function(e,t){var r,n=null===(r=this._subscriptionsByHash[e])||void 0===r?void 0:r.state;if(this._subscriptionsByHash[e]=t,n!==t.state){var i=this._subscriptionStateChangeCallbacksByHash[e];i&&i.forEach(function(e){try{e(t.state)}catch(e){}})}}},{key:"_onSubscriptionStateChange",value:function(e,t){var r,n=this,i=this._subscriptionHashByClientSubscriptionId[e];if(null==i)return function(){};var a=(r=this._subscriptionStateChangeCallbacksByHash)[i]||(r[i]=new Set);return a.add(t),function(){a.delete(t),0===a.size&&delete n._subscriptionStateChangeCallbacksByHash[i]}}},{key:"_updateSubscriptions",value:(eQ=(0,h.A)(b().mark(function e(){var t,r,n=this;return b().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==Object.keys(this._subscriptionsByHash).length){e.next=3;break}return this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout(function(){n._rpcWebSocketIdleTimeout=null;try{n._rpcWebSocket.close()}catch(e){e instanceof Error&&console.log("Error when closing socket connection: ".concat(e.message))}},500)),e.abrupt("return");case 3:if(null!==this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),this._rpcWebSocketConnected){e.next=7;break}return this._rpcWebSocket.connect(),e.abrupt("return");case 7:return t=this._rpcWebSocketGeneration,r=function(){return t===n._rpcWebSocketGeneration},e.next=11,Promise.all(Object.keys(this._subscriptionsByHash).map(function(){var e=(0,h.A)(b().mark(function e(t){var i;return b().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==(i=n._subscriptionsByHash[t])){e.next=3;break}return e.abrupt("return");case 3:e.t0=i.state,e.next="pending"===e.t0?6:"unsubscribed"===e.t0?6:"subscribed"===e.t0?15:19;break;case 6:if(0!==i.callbacks.size){e.next=12;break}return delete n._subscriptionsByHash[t],"unsubscribed"===i.state&&delete n._subscriptionCallbacksByServerSubscriptionId[i.serverSubscriptionId],e.next=11,n._updateSubscriptions();case 11:return e.abrupt("return");case 12:return e.next=14,(0,h.A)(b().mark(function e(){var a,s,o;return b().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=i.args,s=i.method,e.prev=1,n._setSubscription(t,Y(Y({},i),{},{state:"subscribing"})),e.next=5,n._rpcWebSocket.call(s,a);case 5:return o=e.sent,n._setSubscription(t,Y(Y({},i),{},{serverSubscriptionId:o,state:"subscribed"})),n._subscriptionCallbacksByServerSubscriptionId[o]=i.callbacks,e.next=10,n._updateSubscriptions();case 10:e.next=20;break;case 12:if(e.prev=12,e.t0=e.catch(1),console.error("Received ".concat(e.t0 instanceof Error?"":"JSON-RPC ","error calling `").concat(s,"`"),{args:a,error:e.t0}),r()){e.next=17;break}return e.abrupt("return");case 17:return n._setSubscription(t,Y(Y({},i),{},{state:"pending"})),e.next=20,n._updateSubscriptions();case 20:case"end":return e.stop()}},e,null,[[1,12]])}))();case 14:case 18:return e.abrupt("break",19);case 15:if(0!==i.callbacks.size){e.next=18;break}return e.next=18,(0,h.A)(b().mark(function e(){var a,s;return b().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=i.serverSubscriptionId,s=i.unsubscribeMethod,!n._subscriptionsAutoDisposedByRpc.has(a)){e.next=5;break}n._subscriptionsAutoDisposedByRpc.delete(a),e.next=21;break;case 5:return n._setSubscription(t,Y(Y({},i),{},{state:"unsubscribing"})),n._setSubscription(t,Y(Y({},i),{},{state:"unsubscribing"})),e.prev=7,e.next=10,n._rpcWebSocket.call(s,[a]);case 10:e.next=21;break;case 12:if(e.prev=12,e.t0=e.catch(7),e.t0 instanceof Error&&console.error("".concat(s," error:"),e.t0.message),r()){e.next=17;break}return e.abrupt("return");case 17:return n._setSubscription(t,Y(Y({},i),{},{state:"subscribed"})),e.next=20,n._updateSubscriptions();case 20:return e.abrupt("return");case 21:return n._setSubscription(t,Y(Y({},i),{},{state:"unsubscribed"})),e.next=24,n._updateSubscriptions();case 24:case"end":return e.stop()}},e,null,[[7,12]])}))();case 19:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()));case 11:case"end":return e.stop()}},e,this)})),function(){return eQ.apply(this,arguments)})},{key:"_handleServerNotification",value:function(e,t){var r=this._subscriptionCallbacksByServerSubscriptionId[e];void 0!==r&&r.forEach(function(e){try{e.apply(void 0,(0,c.A)(t))}catch(e){console.error(e)}})}},{key:"_wsOnAccountNotification",value:function(e){var t=(0,B.vt)(e,t0),r=t.result,n=t.subscription;this._handleServerNotification(n,[r.value,r.context])}},{key:"_makeSubscription",value:function(e,t){var r=this,n=this._nextClientSubscriptionId++,i=e5([e.method,t]),a=this._subscriptionsByHash[i];return void 0===a?this._subscriptionsByHash[i]=Y(Y({},e),{},{args:t,callbacks:new Set([e.callback]),state:"pending"}):a.callbacks.add(e.callback),this._subscriptionHashByClientSubscriptionId[n]=i,this._subscriptionDisposeFunctionsByClientSubscriptionId[n]=(0,h.A)(b().mark(function t(){var a;return b().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return delete r._subscriptionDisposeFunctionsByClientSubscriptionId[n],delete r._subscriptionHashByClientSubscriptionId[n],eb(void 0!==(a=r._subscriptionsByHash[i]),"Could not find a `Subscription` when tearing down client subscription #".concat(n)),a.callbacks.delete(e.callback),t.next=7,r._updateSubscriptions();case 7:case"end":return t.stop()}},t)})),this._updateSubscriptions(),n}},{key:"onAccountChange",value:function(e,t,r){var n=tc(r),i=n.commitment,a=n.config,s=this._buildArgs([e.toBase58()],i||this._commitment||"finalized","base64",a);return this._makeSubscription({callback:t,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},s)}},{key:"removeAccountChangeListener",value:(e0=(0,h.A)(b().mark(function e(t){return b().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._unsubscribeClientSubscription(t,"account change");case 2:case"end":return e.stop()}},e,this)})),function(e){return e0.apply(this,arguments)})},{key:"_wsOnProgramAccountNotification",value:function(e){var t=(0,B.vt)(e,t2),r=t.result,n=t.subscription;this._handleServerNotification(n,[{accountId:r.value.pubkey,accountInfo:r.value.account},r.context])}},{key:"onProgramAccountChange",value:function(e,t,r,n){var i=tc(r),a=i.commitment,s=i.config,o=this._buildArgs([e.toBase58()],a||this._commitment||"finalized","base64",s||(n?{filters:tl(n)}:void 0));return this._makeSubscription({callback:t,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},o)}},{key:"removeProgramAccountChangeListener",value:(e1=(0,h.A)(b().mark(function e(t){return b().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._unsubscribeClientSubscription(t,"program account change");case 2:case"end":return e.stop()}},e,this)})),function(e){return e1.apply(this,arguments)})},{key:"onLogs",value:function(e,t,r){var n=this._buildArgs(["object"==typeof e?{mentions:[e.toString()]}:e],r||this._commitment||"finalized");return this._makeSubscription({callback:t,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},n)}},{key:"removeOnLogsListener",value:(e2=(0,h.A)(b().mark(function e(t){return b().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._unsubscribeClientSubscription(t,"logs");case 2:case"end":return e.stop()}},e,this)})),function(e){return e2.apply(this,arguments)})},{key:"_wsOnLogsNotification",value:function(e){var t=(0,B.vt)(e,rY),r=t.result,n=t.subscription;this._handleServerNotification(n,[r.value,r.context])}},{key:"_wsOnSlotNotification",value:function(e){var t=(0,B.vt)(e,t8),r=t.result,n=t.subscription;this._handleServerNotification(n,[r])}},{key:"onSlotChange",value:function(e){return this._makeSubscription({callback:e,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}},{key:"removeSlotChangeListener",value:(e3=(0,h.A)(b().mark(function e(t){return b().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._unsubscribeClientSubscription(t,"slot change");case 2:case"end":return e.stop()}},e,this)})),function(e){return e3.apply(this,arguments)})},{key:"_wsOnSlotUpdatesNotification",value:function(e){var t=(0,B.vt)(e,t6),r=t.result,n=t.subscription;this._handleServerNotification(n,[r])}},{key:"onSlotUpdate",value:function(e){return this._makeSubscription({callback:e,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}},{key:"removeSlotUpdateListener",value:(e8=(0,h.A)(b().mark(function e(t){return b().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._unsubscribeClientSubscription(t,"slot update");case 2:case"end":return e.stop()}},e,this)})),function(e){return e8.apply(this,arguments)})},{key:"_unsubscribeClientSubscription",value:(e4=(0,h.A)(b().mark(function e(t,r){var n;return b().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=this._subscriptionDisposeFunctionsByClientSubscriptionId[t])){e.next=6;break}return e.next=4,n();case 4:e.next=7;break;case 6:console.warn("Ignored unsubscribe request because an active subscription with id "+"`".concat(t,"` for '").concat(r,"' events ")+"could not be found.");case 7:case"end":return e.stop()}},e,this)})),function(e,t){return e4.apply(this,arguments)})},{key:"_buildArgs",value:function(e,t,r,n){var i=t||this._commitment;if(i||r||n){var a={};r&&(a.encoding=r),i&&(a.commitment=i),n&&(a=Object.assign(a,n)),e.push(a)}return e}},{key:"_buildArgsAtLeastConfirmed",value:function(e,t,r,n){var i=t||this._commitment;if(i&&!["confirmed","finalized"].includes(i))throw Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(e,t,r,n)}},{key:"_wsOnSignatureNotification",value:function(e){var t=(0,B.vt)(e,t5),r=t.result,n=t.subscription;"receivedSignature"!==r.value&&this._subscriptionsAutoDisposedByRpc.add(n),this._handleServerNotification(n,"receivedSignature"===r.value?[{type:"received"},r.context]:[{type:"status",result:r.value},r.context])}},{key:"onSignature",value:function(e,t,r){var n=this,i=this._buildArgs([e],r||this._commitment||"finalized"),a=this._makeSubscription({callback:function(e,r){if("status"===e.type){t(e.result,r);try{n.removeSignatureListener(a)}catch(e){}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},i);return a}},{key:"onSignatureWithOptions",value:function(e,t,r){var n=this,i=Y(Y({},r),{},{commitment:r&&r.commitment||this._commitment||"finalized"}),s=i.commitment,o=(0,a.A)(i,z),u=this._buildArgs([e],s,void 0,o),c=this._makeSubscription({callback:function(e,r){t(e,r);try{n.removeSignatureListener(c)}catch(e){}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},u);return c}},{key:"removeSignatureListener",value:(e6=(0,h.A)(b().mark(function e(t){return b().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._unsubscribeClientSubscription(t,"signature result");case 2:case"end":return e.stop()}},e,this)})),function(e){return e6.apply(this,arguments)})},{key:"_wsOnRootNotification",value:function(e){var t=(0,B.vt)(e,t7),r=t.result,n=t.subscription;this._handleServerNotification(n,[r])}},{key:"onRootChange",value:function(e){return this._makeSubscription({callback:e,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}},{key:"removeRootChangeListener",value:(e7=(0,h.A)(b().mark(function e(t){return b().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._unsubscribeClientSubscription(t,"root change");case 2:case"end":return e.stop()}},e,this)})),function(e){return e7.apply(this,arguments)})}]),tn}(),rU=function(){function e(t){(0,y.A)(this,e),this._keypair=void 0,this._keypair=null!=t?t:D()}return(0,k.A)(e,[{key:"publicKey",get:function(){return new en(this._keypair.publicKey)}},{key:"secretKey",get:function(){return new Uint8Array(this._keypair.secretKey)}}],[{key:"generate",value:function(){return new e(D())}},{key:"fromSecretKey",value:function(t,r){if(64!==t.byteLength)throw Error("bad secret key size");var n=t.slice(32,64);if(!r||!r.skipValidation){for(var i=H(t.slice(0,32)),a=0;a<32;a++)if(n[a]!==i[a])throw Error("provided secretKey is invalid")}return new e({publicKey:n,secretKey:t})}},{key:"fromSeed",value:function(t){var r=H(t),n=new Uint8Array(64);return n.set(t),n.set(r,32),new e({publicKey:r,secretKey:n})}}]),e}(),rV=Object.freeze({CreateLookupTable:{index:0,layout:P.struct([P.u32("instruction"),eQ("recentSlot"),P.u8("bumpSeed")])},FreezeLookupTable:{index:1,layout:P.struct([P.u32("instruction")])},ExtendLookupTable:{index:2,layout:P.struct([P.u32("instruction"),eQ(),P.seq(ep(),P.offset(P.u32(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:P.struct([P.u32("instruction")])},CloseLookupTable:{index:4,layout:P.struct([P.u32("instruction")])}}),rD=function(){function e(){(0,y.A)(this,e)}return(0,k.A)(e,null,[{key:"decodeInstructionType",value:function(e){this.checkProgramId(e.programId);for(var t,r=P.u32("instruction").decode(e.data),n=0,i=Object.entries(rV);n<i.length;n++){var a=(0,u.A)(i[n],2),s=a[0];if(a[1].index==r){t=s;break}}if(!t)throw Error("Invalid Instruction. Should be a LookupTable Instruction");return t}},{key:"decodeCreateLookupTable",value:function(e){this.checkProgramId(e.programId),this.checkKeysLength(e.keys,4);var t=eJ(rV.CreateLookupTable,e.data).recentSlot;return{authority:e.keys[1].pubkey,payer:e.keys[2].pubkey,recentSlot:Number(t)}}},{key:"decodeExtendLookupTable",value:function(e){if(this.checkProgramId(e.programId),e.keys.length<2)throw Error("invalid instruction; found ".concat(e.keys.length," keys, expected at least 2"));var t=eJ(rV.ExtendLookupTable,e.data).addresses;return{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey,payer:e.keys.length>2?e.keys[2].pubkey:void 0,addresses:t.map(function(e){return new en(e)})}}},{key:"decodeCloseLookupTable",value:function(e){return this.checkProgramId(e.programId),this.checkKeysLength(e.keys,3),{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey,recipient:e.keys[2].pubkey}}},{key:"decodeFreezeLookupTable",value:function(e){return this.checkProgramId(e.programId),this.checkKeysLength(e.keys,2),{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey}}},{key:"decodeDeactivateLookupTable",value:function(e){return this.checkProgramId(e.programId),this.checkKeysLength(e.keys,2),{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey}}},{key:"checkProgramId",value:function(e){if(!e.equals(rH.programId))throw Error("invalid instruction; programId is not AddressLookupTable Program")}},{key:"checkKeysLength",value:function(e,t){if(e.length<t)throw Error("invalid instruction; found ".concat(e.length," keys, expected at least ").concat(t))}}]),e}(),rH=function(){function e(){(0,y.A)(this,e)}return(0,k.A)(e,null,[{key:"createLookupTable",value:function(e){var t=en.findProgramAddressSync([e.authority.toBuffer(),(0,E.toBufferLE)(BigInt(e.recentSlot),8)],this.programId),r=(0,u.A)(t,2),n=r[0],i=r[1],a=eF(rV.CreateLookupTable,{recentSlot:BigInt(e.recentSlot),bumpSeed:i}),s=[{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1},{pubkey:e.payer,isSigner:!0,isWritable:!0},{pubkey:e2.programId,isSigner:!1,isWritable:!1}];return[new eE({programId:this.programId,keys:s,data:a}),n]}},{key:"freezeLookupTable",value:function(e){var t=eF(rV.FreezeLookupTable),r=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return new eE({programId:this.programId,keys:r,data:t})}},{key:"extendLookupTable",value:function(e){var t=eF(rV.ExtendLookupTable,{addresses:e.addresses.map(function(e){return e.toBytes()})}),r=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return e.payer&&r.push({pubkey:e.payer,isSigner:!0,isWritable:!0},{pubkey:e2.programId,isSigner:!1,isWritable:!1}),new eE({programId:this.programId,keys:r,data:t})}},{key:"deactivateLookupTable",value:function(e){var t=eF(rV.DeactivateLookupTable),r=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return new eE({programId:this.programId,keys:r,data:t})}},{key:"closeLookupTable",value:function(e){var t=eF(rV.CloseLookupTable),r=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1},{pubkey:e.recipient,isSigner:!1,isWritable:!0}];return new eE({programId:this.programId,keys:r,data:t})}}]),e}();rH.programId=new en("AddressLookupTab1e1111111111111111111111111");var rF=function(){function e(){(0,y.A)(this,e)}return(0,k.A)(e,null,[{key:"decodeInstructionType",value:function(e){this.checkProgramId(e.programId);for(var t,r=P.u8("instruction").decode(e.data),n=0,i=Object.entries(rJ);n<i.length;n++){var a=(0,u.A)(i[n],2),s=a[0];if(a[1].index==r){t=s;break}}if(!t)throw Error("Instruction type incorrect; not a ComputeBudgetInstruction");return t}},{key:"decodeRequestUnits",value:function(e){this.checkProgramId(e.programId);var t=eJ(rJ.RequestUnits,e.data);return{units:t.units,additionalFee:t.additionalFee}}},{key:"decodeRequestHeapFrame",value:function(e){return this.checkProgramId(e.programId),{bytes:eJ(rJ.RequestHeapFrame,e.data).bytes}}},{key:"decodeSetComputeUnitLimit",value:function(e){return this.checkProgramId(e.programId),{units:eJ(rJ.SetComputeUnitLimit,e.data).units}}},{key:"decodeSetComputeUnitPrice",value:function(e){return this.checkProgramId(e.programId),{microLamports:eJ(rJ.SetComputeUnitPrice,e.data).microLamports}}},{key:"checkProgramId",value:function(e){if(!e.equals(rG.programId))throw Error("invalid instruction; programId is not ComputeBudgetProgram")}}]),e}(),rJ=Object.freeze({RequestUnits:{index:0,layout:P.struct([P.u8("instruction"),P.u32("units"),P.u32("additionalFee")])},RequestHeapFrame:{index:1,layout:P.struct([P.u8("instruction"),P.u32("bytes")])},SetComputeUnitLimit:{index:2,layout:P.struct([P.u8("instruction"),P.u32("units")])},SetComputeUnitPrice:{index:3,layout:P.struct([P.u8("instruction"),eQ("microLamports")])}}),rG=function(){function e(){(0,y.A)(this,e)}return(0,k.A)(e,null,[{key:"requestUnits",value:function(e){var t=eF(rJ.RequestUnits,e);return new eE({keys:[],programId:this.programId,data:t})}},{key:"requestHeapFrame",value:function(e){var t=eF(rJ.RequestHeapFrame,e);return new eE({keys:[],programId:this.programId,data:t})}},{key:"setComputeUnitLimit",value:function(e){var t=eF(rJ.SetComputeUnitLimit,e);return new eE({keys:[],programId:this.programId,data:t})}},{key:"setComputeUnitPrice",value:function(e){var t=eF(rJ.SetComputeUnitPrice,{microLamports:BigInt(e.microLamports)});return new eE({keys:[],programId:this.programId,data:t})}}]),e}();rG.programId=new en("ComputeBudget111111111111111111111111111111");var rX=P.struct([P.u8("numSignatures"),P.u8("padding"),P.u16("signatureOffset"),P.u16("signatureInstructionIndex"),P.u16("publicKeyOffset"),P.u16("publicKeyInstructionIndex"),P.u16("messageDataOffset"),P.u16("messageDataSize"),P.u16("messageInstructionIndex")]),rZ=function(){function e(){(0,y.A)(this,e)}return(0,k.A)(e,null,[{key:"createInstructionWithPublicKey",value:function(t){var r=t.publicKey,n=t.message,i=t.signature,a=t.instructionIndex;eb(32===r.length,"Public Key must be ".concat(32," bytes but received ").concat(r.length," bytes")),eb(64===i.length,"Signature must be ".concat(64," bytes but received ").concat(i.length," bytes"));var s=rX.span,o=s+r.length,u=o+i.length,c=m.Buffer.alloc(u+n.length),l=null==a?65535:a;return rX.encode({numSignatures:1,padding:0,signatureOffset:o,signatureInstructionIndex:l,publicKeyOffset:s,publicKeyInstructionIndex:l,messageDataOffset:u,messageDataSize:n.length,messageInstructionIndex:l},c),c.fill(r,s),c.fill(i,o),c.fill(n,u),new eE({keys:[],programId:e.programId,data:c})}},{key:"createInstructionWithPrivateKey",value:function(e){var t=e.privateKey,r=e.message,n=e.instructionIndex;eb(64===t.length,"Private key must be ".concat(64," bytes but received ").concat(t.length," bytes"));try{var i=rU.fromSecretKey(t),a=i.publicKey.toBytes(),s=J(r,i.secretKey);return this.createInstructionWithPublicKey({publicKey:a,message:r,signature:s,instructionIndex:n})}catch(e){throw Error("Error creating instruction; ".concat(e))}}}]),e}();rZ.programId=new en("Ed25519SigVerify111111111111111111111111111");var r$=function(e,t){var r=C.bI.sign(e,t);return[r.toCompactRawBytes(),r.recovery]};C.bI.utils.isValidPrivateKey;var rQ=C.bI.getPublicKey,r0=P.struct([P.u8("numSignatures"),P.u16("signatureOffset"),P.u8("signatureInstructionIndex"),P.u16("ethAddressOffset"),P.u8("ethAddressInstructionIndex"),P.u16("messageDataOffset"),P.u16("messageDataSize"),P.u8("messageInstructionIndex"),P.blob(20,"ethAddress"),P.blob(64,"signature"),P.u8("recoveryId")]),r1=function(){function e(){(0,y.A)(this,e)}return(0,k.A)(e,null,[{key:"publicKeyToEthAddress",value:function(e){eb(64===e.length,"Public key must be ".concat(64," bytes but received ").concat(e.length," bytes"));try{return m.Buffer.from((0,R.lY)(X(e))).slice(-20)}catch(e){throw Error("Error constructing Ethereum address: ".concat(e))}}},{key:"createInstructionWithPublicKey",value:function(t){var r=t.publicKey,n=t.message,i=t.signature,a=t.recoveryId,s=t.instructionIndex;return e.createInstructionWithEthAddress({ethAddress:e.publicKeyToEthAddress(r),message:n,signature:i,recoveryId:a,instructionIndex:s})}},{key:"createInstructionWithEthAddress",value:function(t){var r,n=t.ethAddress,i=t.message,a=t.signature,s=t.recoveryId,o=t.instructionIndex,u=void 0===o?0:o;eb(20===(r="string"==typeof n?n.startsWith("0x")?m.Buffer.from(n.substr(2),"hex"):m.Buffer.from(n,"hex"):n).length,"Address must be ".concat(20," bytes but received ").concat(r.length," bytes"));var c=12+r.length,l=c+a.length+1,h=m.Buffer.alloc(r0.span+i.length);return r0.encode({numSignatures:1,signatureOffset:c,signatureInstructionIndex:u,ethAddressOffset:12,ethAddressInstructionIndex:u,messageDataOffset:l,messageDataSize:i.length,messageInstructionIndex:u,signature:X(a),ethAddress:X(r),recoveryId:s},h),h.fill(X(i),r0.span),new eE({keys:[],programId:e.programId,data:h})}},{key:"createInstructionWithPrivateKey",value:function(e){var t=e.privateKey,r=e.message,n=e.instructionIndex;eb(32===t.length,"Private key must be ".concat(32," bytes but received ").concat(t.length," bytes"));try{var i=X(t),a=rQ(i,!1).slice(1),s=m.Buffer.from((0,R.lY)(X(r))),o=r$(s,i),c=(0,u.A)(o,2),l=c[0],h=c[1];return this.createInstructionWithPublicKey({publicKey:a,message:r,signature:l,recoveryId:h,instructionIndex:n})}catch(e){throw Error("Error creating instruction; ".concat(e))}}}]),e}();r1.programId=new en("KeccakSecp256k11111111111111111111111111111");var r2=new en("StakeConfig11111111111111111111111111111111"),r3=(0,k.A)(function e(t,r){(0,y.A)(this,e),this.staker=void 0,this.withdrawer=void 0,this.staker=t,this.withdrawer=r}),r8=(0,k.A)(function e(t,r,n){(0,y.A)(this,e),this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=t,this.epoch=r,this.custodian=n});r8.default=new r8(0,0,en.default);var r4=function(){function e(){(0,y.A)(this,e)}return(0,k.A)(e,null,[{key:"decodeInstructionType",value:function(e){this.checkProgramId(e.programId);for(var t,r=P.u32("instruction").decode(e.data),n=0,i=Object.entries(r6);n<i.length;n++){var a=(0,u.A)(i[n],2),s=a[0];if(a[1].index==r){t=s;break}}if(!t)throw Error("Instruction type incorrect; not a StakeInstruction");return t}},{key:"decodeInitialize",value:function(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);var t=eJ(r6.Initialize,e.data),r=t.authorized,n=t.lockup;return{stakePubkey:e.keys[0].pubkey,authorized:new r3(new en(r.staker),new en(r.withdrawer)),lockup:new r8(n.unixTimestamp,n.epoch,new en(n.custodian))}}},{key:"decodeDelegate",value:function(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,6),eJ(r6.Delegate,e.data),{stakePubkey:e.keys[0].pubkey,votePubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[5].pubkey}}},{key:"decodeAuthorize",value:function(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);var t=eJ(r6.Authorize,e.data),r=t.newAuthorized,n=t.stakeAuthorizationType,i={stakePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey,newAuthorizedPubkey:new en(r),stakeAuthorizationType:{index:n}};return e.keys.length>3&&(i.custodianPubkey=e.keys[3].pubkey),i}},{key:"decodeAuthorizeWithSeed",value:function(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);var t=eJ(r6.AuthorizeWithSeed,e.data),r=t.newAuthorized,n=t.stakeAuthorizationType,i=t.authoritySeed,a=t.authorityOwner,s={stakePubkey:e.keys[0].pubkey,authorityBase:e.keys[1].pubkey,authoritySeed:i,authorityOwner:new en(a),newAuthorizedPubkey:new en(r),stakeAuthorizationType:{index:n}};return e.keys.length>3&&(s.custodianPubkey=e.keys[3].pubkey),s}},{key:"decodeSplit",value:function(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);var t=eJ(r6.Split,e.data).lamports;return{stakePubkey:e.keys[0].pubkey,splitStakePubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[2].pubkey,lamports:t}}},{key:"decodeMerge",value:function(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3),eJ(r6.Merge,e.data),{stakePubkey:e.keys[0].pubkey,sourceStakePubKey:e.keys[1].pubkey,authorizedPubkey:e.keys[4].pubkey}}},{key:"decodeWithdraw",value:function(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,5);var t=eJ(r6.Withdraw,e.data).lamports,r={stakePubkey:e.keys[0].pubkey,toPubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[4].pubkey,lamports:t};return e.keys.length>5&&(r.custodianPubkey=e.keys[5].pubkey),r}},{key:"decodeDeactivate",value:function(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3),eJ(r6.Deactivate,e.data),{stakePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey}}},{key:"checkProgramId",value:function(e){if(!e.equals(r7.programId))throw Error("invalid instruction; programId is not StakeProgram")}},{key:"checkKeyLength",value:function(e,t){if(e.length<t)throw Error("invalid instruction; found ".concat(e.length," keys, expected at least ").concat(t))}}]),e}(),r6=Object.freeze({Initialize:{index:0,layout:P.struct([P.u32("instruction"),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"authorized";return P.struct([ep("staker"),ep("withdrawer")],e)}(),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"lockup";return P.struct([P.ns64("unixTimestamp"),P.ns64("epoch"),ep("custodian")],e)}()])},Authorize:{index:1,layout:P.struct([P.u32("instruction"),ep("newAuthorized"),P.u32("stakeAuthorizationType")])},Delegate:{index:2,layout:P.struct([P.u32("instruction")])},Split:{index:3,layout:P.struct([P.u32("instruction"),P.ns64("lamports")])},Withdraw:{index:4,layout:P.struct([P.u32("instruction"),P.ns64("lamports")])},Deactivate:{index:5,layout:P.struct([P.u32("instruction")])},Merge:{index:7,layout:P.struct([P.u32("instruction")])},AuthorizeWithSeed:{index:8,layout:P.struct([P.u32("instruction"),ep("newAuthorized"),P.u32("stakeAuthorizationType"),ey("authoritySeed"),ep("authorityOwner")])}}),r5=Object.freeze({Staker:{index:0},Withdrawer:{index:1}}),r7=function(){function e(){(0,y.A)(this,e)}return(0,k.A)(e,null,[{key:"initialize",value:function(e){var t=e.stakePubkey,r=e.authorized,n=e.lockup||r8.default,i=eF(r6.Initialize,{authorized:{staker:X(r.staker.toBuffer()),withdrawer:X(r.withdrawer.toBuffer())},lockup:{unixTimestamp:n.unixTimestamp,epoch:n.epoch,custodian:X(n.custodian.toBuffer())}});return new eE({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:eL,isSigner:!1,isWritable:!1}],programId:this.programId,data:i})}},{key:"createAccountWithSeed",value:function(e){var t=new eB;t.add(e2.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.stakePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:this.space,programId:this.programId}));var r=e.stakePubkey,n=e.authorized,i=e.lockup;return t.add(this.initialize({stakePubkey:r,authorized:n,lockup:i}))}},{key:"createAccount",value:function(e){var t=new eB;t.add(e2.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.stakePubkey,lamports:e.lamports,space:this.space,programId:this.programId}));var r=e.stakePubkey,n=e.authorized,i=e.lockup;return t.add(this.initialize({stakePubkey:r,authorized:n,lockup:i}))}},{key:"delegate",value:function(e){var t=e.stakePubkey,r=e.authorizedPubkey,n=e.votePubkey,i=eF(r6.Delegate);return new eB().add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:eO,isSigner:!1,isWritable:!1},{pubkey:eY,isSigner:!1,isWritable:!1},{pubkey:r2,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:i})}},{key:"authorize",value:function(e){var t=e.stakePubkey,r=e.authorizedPubkey,n=e.newAuthorizedPubkey,i=e.stakeAuthorizationType,a=e.custodianPubkey,s=eF(r6.Authorize,{newAuthorized:X(n.toBuffer()),stakeAuthorizationType:i.index}),o=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:eO,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}];return a&&o.push({pubkey:a,isSigner:!0,isWritable:!1}),new eB().add({keys:o,programId:this.programId,data:s})}},{key:"authorizeWithSeed",value:function(e){var t=e.stakePubkey,r=e.authorityBase,n=e.authoritySeed,i=e.authorityOwner,a=e.newAuthorizedPubkey,s=e.stakeAuthorizationType,o=e.custodianPubkey,u=eF(r6.AuthorizeWithSeed,{newAuthorized:X(a.toBuffer()),stakeAuthorizationType:s.index,authoritySeed:n,authorityOwner:X(i.toBuffer())}),c=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1},{pubkey:eO,isSigner:!1,isWritable:!1}];return o&&c.push({pubkey:o,isSigner:!0,isWritable:!1}),new eB().add({keys:c,programId:this.programId,data:u})}},{key:"splitInstruction",value:function(e){var t=e.stakePubkey,r=e.authorizedPubkey,n=e.splitStakePubkey,i=e.lamports,a=eF(r6.Split,{lamports:i});return new eE({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:a})}},{key:"split",value:function(e,t){var r=new eB;return r.add(e2.createAccount({fromPubkey:e.authorizedPubkey,newAccountPubkey:e.splitStakePubkey,lamports:t,space:this.space,programId:this.programId})),r.add(this.splitInstruction(e))}},{key:"splitWithSeed",value:function(e,t){var r=e.stakePubkey,n=e.authorizedPubkey,i=e.splitStakePubkey,a=e.basePubkey,s=e.seed,o=e.lamports,u=new eB;return u.add(e2.allocate({accountPubkey:i,basePubkey:a,seed:s,space:this.space,programId:this.programId})),t&&t>0&&u.add(e2.transfer({fromPubkey:e.authorizedPubkey,toPubkey:i,lamports:t})),u.add(this.splitInstruction({stakePubkey:r,authorizedPubkey:n,splitStakePubkey:i,lamports:o}))}},{key:"merge",value:function(e){var t=e.stakePubkey,r=e.sourceStakePubKey,n=e.authorizedPubkey,i=eF(r6.Merge);return new eB().add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:eO,isSigner:!1,isWritable:!1},{pubkey:eY,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:i})}},{key:"withdraw",value:function(e){var t=e.stakePubkey,r=e.authorizedPubkey,n=e.toPubkey,i=e.lamports,a=e.custodianPubkey,s=eF(r6.Withdraw,{lamports:i}),o=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:eO,isSigner:!1,isWritable:!1},{pubkey:eY,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return a&&o.push({pubkey:a,isSigner:!0,isWritable:!1}),new eB().add({keys:o,programId:this.programId,data:s})}},{key:"deactivate",value:function(e){var t=e.stakePubkey,r=e.authorizedPubkey,n=eF(r6.Deactivate);return new eB().add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:eO,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}}]),e}();r7.programId=new en("Stake11111111111111111111111111111111111111"),r7.space=200;var r9=(0,k.A)(function e(t,r,n,i){(0,y.A)(this,e),this.nodePubkey=void 0,this.authorizedVoter=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.nodePubkey=t,this.authorizedVoter=r,this.authorizedWithdrawer=n,this.commission=i}),ne=function(){function e(){(0,y.A)(this,e)}return(0,k.A)(e,null,[{key:"decodeInstructionType",value:function(e){this.checkProgramId(e.programId);for(var t,r=P.u32("instruction").decode(e.data),n=0,i=Object.entries(nt);n<i.length;n++){var a=(0,u.A)(i[n],2),s=a[0];if(a[1].index==r){t=s;break}}if(!t)throw Error("Instruction type incorrect; not a VoteInstruction");return t}},{key:"decodeInitializeAccount",value:function(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,4);var t=eJ(nt.InitializeAccount,e.data).voteInit;return{votePubkey:e.keys[0].pubkey,nodePubkey:e.keys[3].pubkey,voteInit:new r9(new en(t.nodePubkey),new en(t.authorizedVoter),new en(t.authorizedWithdrawer),t.commission)}}},{key:"decodeAuthorize",value:function(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);var t=eJ(nt.Authorize,e.data),r=t.newAuthorized,n=t.voteAuthorizationType;return{votePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey,newAuthorizedPubkey:new en(r),voteAuthorizationType:{index:n}}}},{key:"decodeAuthorizeWithSeed",value:function(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);var t=eJ(nt.AuthorizeWithSeed,e.data).voteAuthorizeWithSeedArgs,r=t.currentAuthorityDerivedKeyOwnerPubkey,n=t.currentAuthorityDerivedKeySeed,i=t.newAuthorized,a=t.voteAuthorizationType;return{currentAuthorityDerivedKeyBasePubkey:e.keys[2].pubkey,currentAuthorityDerivedKeyOwnerPubkey:new en(r),currentAuthorityDerivedKeySeed:n,newAuthorizedPubkey:new en(i),voteAuthorizationType:{index:a},votePubkey:e.keys[0].pubkey}}},{key:"decodeWithdraw",value:function(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);var t=eJ(nt.Withdraw,e.data).lamports;return{votePubkey:e.keys[0].pubkey,authorizedWithdrawerPubkey:e.keys[2].pubkey,lamports:t,toPubkey:e.keys[1].pubkey}}},{key:"checkProgramId",value:function(e){if(!e.equals(nn.programId))throw Error("invalid instruction; programId is not VoteProgram")}},{key:"checkKeyLength",value:function(e,t){if(e.length<t)throw Error("invalid instruction; found ".concat(e.length," keys, expected at least ").concat(t))}}]),e}(),nt=Object.freeze({InitializeAccount:{index:0,layout:P.struct([P.u32("instruction"),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"voteInit";return P.struct([ep("nodePubkey"),ep("authorizedVoter"),ep("authorizedWithdrawer"),P.u8("commission")],e)}()])},Authorize:{index:1,layout:P.struct([P.u32("instruction"),ep("newAuthorized"),P.u32("voteAuthorizationType")])},Withdraw:{index:3,layout:P.struct([P.u32("instruction"),P.ns64("lamports")])},UpdateValidatorIdentity:{index:4,layout:P.struct([P.u32("instruction")])},AuthorizeWithSeed:{index:10,layout:P.struct([P.u32("instruction"),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"voteAuthorizeWithSeedArgs";return P.struct([P.u32("voteAuthorizationType"),ep("currentAuthorityDerivedKeyOwnerPubkey"),ey("currentAuthorityDerivedKeySeed"),ep("newAuthorized")],e)}()])}}),nr=Object.freeze({Voter:{index:0},Withdrawer:{index:1}}),nn=function(){function e(){(0,y.A)(this,e)}return(0,k.A)(e,null,[{key:"initializeAccount",value:function(e){var t=e.votePubkey,r=e.nodePubkey,n=e.voteInit,i=eF(nt.InitializeAccount,{voteInit:{nodePubkey:X(n.nodePubkey.toBuffer()),authorizedVoter:X(n.authorizedVoter.toBuffer()),authorizedWithdrawer:X(n.authorizedWithdrawer.toBuffer()),commission:n.commission}});return new eE({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:eL,isSigner:!1,isWritable:!1},{pubkey:eO,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:i})}},{key:"createAccount",value:function(e){var t=new eB;return t.add(e2.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.votePubkey,lamports:e.lamports,space:this.space,programId:this.programId})),t.add(this.initializeAccount({votePubkey:e.votePubkey,nodePubkey:e.voteInit.nodePubkey,voteInit:e.voteInit}))}},{key:"authorize",value:function(e){var t=e.votePubkey,r=e.authorizedPubkey,n=e.newAuthorizedPubkey,i=e.voteAuthorizationType,a=eF(nt.Authorize,{newAuthorized:X(n.toBuffer()),voteAuthorizationType:i.index});return new eB().add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:eO,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:a})}},{key:"authorizeWithSeed",value:function(e){var t=e.currentAuthorityDerivedKeyBasePubkey,r=e.currentAuthorityDerivedKeyOwnerPubkey,n=e.currentAuthorityDerivedKeySeed,i=e.newAuthorizedPubkey,a=e.voteAuthorizationType,s=e.votePubkey,o=eF(nt.AuthorizeWithSeed,{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:X(r.toBuffer()),currentAuthorityDerivedKeySeed:n,newAuthorized:X(i.toBuffer()),voteAuthorizationType:a.index}});return new eB().add({keys:[{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:eO,isSigner:!1,isWritable:!1},{pubkey:t,isSigner:!0,isWritable:!1}],programId:this.programId,data:o})}},{key:"withdraw",value:function(e){var t=e.votePubkey,r=e.authorizedWithdrawerPubkey,n=e.lamports,i=e.toPubkey,a=eF(nt.Withdraw,{lamports:n});return new eB().add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:a})}},{key:"safeWithdraw",value:function(t,r,n){if(t.lamports>r-n)throw Error("Withdraw will leave vote account with insufficient funds.");return e.withdraw(t)}},{key:"updateValidatorIdentity",value:function(e){var t=e.votePubkey,r=e.authorizedWithdrawerPubkey,n=e.nodePubkey,i=eF(nt.UpdateValidatorIdentity);return new eB().add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:i})}}]),e}();nn.programId=new en("Vote111111111111111111111111111111111111111"),nn.space=3762;var ni=new en("Va1idator1nfo111111111111111111111111111111"),na=(0,B.NW)({name:(0,B.Yj)(),website:(0,B.lq)((0,B.Yj)()),details:(0,B.lq)((0,B.Yj)()),iconUrl:(0,B.lq)((0,B.Yj)()),keybaseUsername:(0,B.lq)((0,B.Yj)())}),ns=function(){function e(t,r){(0,y.A)(this,e),this.key=void 0,this.info=void 0,this.key=t,this.info=r}return(0,k.A)(e,null,[{key:"fromConfigData",value:function(t){var r=(0,c.A)(t);if(2!==ek(r))return null;for(var n=[],i=0;i<2;i++){var a=new en(eS(r,0,et)),s=1===ew(r);n.push({publicKey:a,isSigner:s})}if(n[0].publicKey.equals(ni)&&n[1].isSigner){var o=JSON.parse(ey().decode(m.Buffer.from(r)));return(0,B.vA)(o,na),new e(n[1].publicKey,o)}return null}}]),e}(),no=new en("Vote111111111111111111111111111111111111111"),nu=P.struct([ep("nodePubkey"),ep("authorizedWithdrawer"),P.u8("commission"),P.nu64(),P.seq(P.struct([P.nu64("slot"),P.u32("confirmationCount")]),P.offset(P.u32(),-8),"votes"),P.u8("rootSlotValid"),P.nu64("rootSlot"),P.nu64(),P.seq(P.struct([P.nu64("epoch"),ep("authorizedVoter")]),P.offset(P.u32(),-8),"authorizedVoters"),P.struct([P.seq(P.struct([ep("authorizedPubkey"),P.nu64("epochOfLastAuthorizedSwitch"),P.nu64("targetEpoch")]),32,"buf"),P.nu64("idx"),P.u8("isEmpty")],"priorVoters"),P.nu64(),P.seq(P.struct([P.nu64("epoch"),P.nu64("credits"),P.nu64("prevCredits")]),P.offset(P.u32(),-8),"epochCredits"),P.struct([P.nu64("slot"),P.nu64("timestamp")],"lastTimestamp")]),nc=function(){function e(t){(0,y.A)(this,e),this.nodePubkey=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.rootSlot=void 0,this.votes=void 0,this.authorizedVoters=void 0,this.priorVoters=void 0,this.epochCredits=void 0,this.lastTimestamp=void 0,this.nodePubkey=t.nodePubkey,this.authorizedWithdrawer=t.authorizedWithdrawer,this.commission=t.commission,this.rootSlot=t.rootSlot,this.votes=t.votes,this.authorizedVoters=t.authorizedVoters,this.priorVoters=t.priorVoters,this.epochCredits=t.epochCredits,this.lastTimestamp=t.lastTimestamp}return(0,k.A)(e,null,[{key:"fromAccountData",value:function(t){var r,n,i,a=nu.decode(X(t),4),s=a.rootSlot;return a.rootSlotValid||(s=null),new e({nodePubkey:new en(a.nodePubkey),authorizedWithdrawer:new en(a.authorizedWithdrawer),commission:a.commission,votes:a.votes,rootSlot:s,authorizedVoters:a.authorizedVoters.map(nl),priorVoters:(n=(r=a.priorVoters).buf,i=r.idx,r.isEmpty?[]:[].concat((0,c.A)(n.slice(i+1).map(nh)),(0,c.A)(n.slice(0,i).map(nh)))),epochCredits:a.epochCredits,lastTimestamp:a.lastTimestamp})}}]),e}();function nl(e){var t=e.authorizedVoter;return{epoch:e.epoch,authorizedVoter:new en(t)}}function nh(e){var t=e.authorizedPubkey,r=e.epochOfLastAuthorizedSwitch,n=e.targetEpoch;return{authorizedPubkey:new en(t),epochOfLastAuthorizedSwitch:r,targetEpoch:n}}var nd={http:{devnet:"http://api.devnet.solana.com",testnet:"http://api.testnet.solana.com","mainnet-beta":"http://api.mainnet-beta.solana.com/"},https:{devnet:"https://api.devnet.solana.com",testnet:"https://api.testnet.solana.com","mainnet-beta":"https://api.mainnet-beta.solana.com/"}};function np(e,t){var r=!1===t?"http":"https";if(!e)return nd[r].devnet;var n=nd[r][e];if(!n)throw Error("Unknown ".concat(r," cluster: ").concat(e));return n}function nf(e,t,r,n){return ny.apply(this,arguments)}function ny(){return(ny=(0,h.A)(b().mark(function e(t,r,n,i){var a,s,o,u,c,l,h;return b().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n&&Object.prototype.hasOwnProperty.call(n,"lastValidBlockHeight")?(a=n,s=i):n&&Object.prototype.hasOwnProperty.call(n,"nonceValue")?(a=n,s=i):s=n,o=s&&{skipPreflight:s.skipPreflight,preflightCommitment:s.preflightCommitment||s.commitment,minContextSlot:s.minContextSlot},e.next=4,t.sendRawTransaction(r,o);case 4:return u=e.sent,c=s&&s.commitment,l=a?t.confirmTransaction(a,c):t.confirmTransaction(u,c),e.next=9,l;case 9:if(!(h=e.sent.value).err){e.next=14;break}if(!(null!=u)){e.next=13;break}throw new ej({action:null!=o&&o.skipPreflight?"send":"simulate",signature:u,transactionMessage:"Status: (".concat(JSON.stringify(h),")")});case 13:throw Error("Raw transaction ".concat(u," failed (").concat(JSON.stringify(h),")"));case 14:return e.abrupt("return",u);case 15:case"end":return e.stop()}},e)}))).apply(this,arguments)}var nk=1e9}}]);